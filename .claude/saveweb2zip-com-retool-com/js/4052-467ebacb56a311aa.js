try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="50f3729e-9bd2-4511-91eb-2070cf725a04",e._sentryDebugIdIdentifier="sentry-dbid-50f3729e-9bd2-4511-91eb-2070cf725a04")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4052],{512:e=>{"use strict";e.exports=Math.round},950:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({flagPaths:e,encodedValues:t}){let r=JSON.parse(atob(t)),n=e.filter(e=>!(e in r));if(n.length>0)throw Error(`Missing flag values for: ${n.join(", ")}`);return r}},1411:(e,t,r)=>{"use strict";t.parse=r(58724),t.stringify=r(90706)},2818:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){try{return e()}catch(e){if(e instanceof Error)throw e.message=t+e.message,e;throw Error(t+JSON.stringify(e))}}},3257:(e,t,r)=>{"use strict";var n=r(37811);function o(){return void 0!==n&&n.env&&"__NEXT_DIST_DIR"in n.env}function i(){return"object"==typeof n&&n&&!1}Object.defineProperty(t,"__esModule",{value:!0}),t.isBackendServer=t.isReactNative=t.isBrowser=void 0,t.isNextJsBuild=o,t.isNextJsServer=i,t.isBrowser="undefined"!=typeof window&&void 0!==window.document,t.isReactNative="undefined"!=typeof navigator&&"ReactNative"===navigator.product,t.isBackendServer=!t.isBrowser&&!o()&&!i()&&!t.isReactNative},3610:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,r,n,i){var s,a,l,u,c=Object.create((r&&r.prototype instanceof y?r:y).prototype);return o(c,"_invoke",{value:(s=e,a=n,l=new P(i||[]),u=f,function(e,r){if(u===d)throw Error("Generator is already running");if(u===h){if("throw"===e)throw r;return{value:t,done:!0}}for(l.method=e,l.arg=r;;){var n=l.delegate;if(n){var o=function e(r,n){var o=n.method,i=r.iterator[o];if(t===i)return(n.delegate=null,"throw"===o&&r.iterator.return&&(n.method="return",n.arg=t,e(r,n),"throw"===n.method))?g:("return"!==o&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+o+"' method")),g);var s=p(i,r.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,g;var a=s.arg;return a?a.done?(n[r.resultName]=a.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,g)}(n,l);if(o){if(o===g)continue;return o}}if("next"===l.method)l.sent=l._sent=l.arg;else if("throw"===l.method){if(u===f)throw u=h,l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);u=d;var i=p(s,a,l);if("normal"===i.type){if(u=l.done?h:"suspendedYield",i.arg===g)continue;return{value:i.arg,done:l.done}}"throw"===i.type&&(u=h,l.method="throw",l.arg=i.arg)}})}),c}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f="suspendedStart",d="executing",h="completed",g={};function y(){}function m(){}function b(){}var v={};u(v,s,function(){return this});var E=Object.getPrototypeOf,x=E&&E(E(S([])));x&&x!==r&&n.call(x,s)&&(v=x);var O=b.prototype=y.prototype=Object.create(v);function j(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){var r;o(this,"_invoke",{value:function(o,i){function s(){return new t(function(r,s){!function r(o,i,s,a){var l=p(e[o],e,i);if("throw"===l.type)a(l.arg);else{var u=l.arg,c=u.value;return c&&"object"==typeof c&&n.call(c,"__await")?t.resolve(c.__await).then(function(e){r("next",e,s,a)},function(e){r("throw",e,s,a)}):t.resolve(c).then(function(e){u.value=e,s(u)},function(e){return r("throw",e,s,a)})}}(o,i,r,s)})}return r=r?r.then(s,s):s()}})}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function S(e){if(null!=e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw TypeError(typeof e+" is not iterable")}return m.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=u(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},j(w.prototype),u(w.prototype,a,function(){return this}),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var s=new w(c(t,r,n,o),i);return e.isGeneratorFunction(r)?s:s.next().then(function(e){return e.done?e.value:s.next()})},j(O),u(O,l,"Generator"),u(O,s,function(){return this}),u(O,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=S,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var l=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(l&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);else if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else if(u){if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else throw Error("try statement without catch or finally")}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return(s.type=e,s.arg=t,i)?(this.method="next",this.next=i.finallyLoc,g):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:S(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},3928:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var n in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var o=Object.getOwnPropertySymbols(e);if(1!==o.length||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},4052:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VoidNode=t.StringNode=t.IntNode=t.FloatNode=t.BooleanNode=t.VercelEdgeConfigInitDataProvider=t.HypertuneEdgeInitDataProvider=t.Node=t.init=t.mergeFieldQueryAndArgs=t.merge=t.getOverrideFromOverridesList=t.getFieldQueryForPath=t.decodeFlagValues=t.create=t.LogLevel=void 0,r(3610);let o=n(r(31268));t.create=o.default,t.init=o.default,t.Node=n(r(71572)).default,t.decodeFlagValues=n(r(950)).default,t.getFieldQueryForPath=n(r(69764)).default,t.getOverrideFromOverridesList=n(r(44061)).default,t.merge=n(r(34880)).default,t.mergeFieldQueryAndArgs=n(r(54692)).default,t.HypertuneEdgeInitDataProvider=n(r(33253)).default,t.VercelEdgeConfigInitDataProvider=n(r(88938)).default;var i=r(28815);Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return i.LogLevel}});var s=r(61910);Object.defineProperty(t,"BooleanNode",{enumerable:!0,get:function(){return s.BooleanNode}}),Object.defineProperty(t,"FloatNode",{enumerable:!0,get:function(){return s.FloatNode}}),Object.defineProperty(t,"IntNode",{enumerable:!0,get:function(){return s.IntNode}}),Object.defineProperty(t,"StringNode",{enumerable:!0,get:function(){return s.StringNode}}),Object.defineProperty(t,"VoidNode",{enumerable:!0,get:function(){return s.VoidNode}})},4440:(e,t,r)=>{"use strict";var n=("undefined"!=typeof JSON?JSON:r(1411)).stringify,o=r(51571),i=r(15255),s=r(19255),a=r(41605),l=a("Array.prototype.join"),u=a("Array.prototype.indexOf"),c=a("Array.prototype.splice"),p=a("Array.prototype.sort"),f=function(e,t){for(var r="",n=0;n<e;n+=1)r+=t;return r},d=function(e,t,r){return r};e.exports=function(e){var t=arguments.length>1?arguments[1]:void 0,r=t&&t.space||"";"number"==typeof r&&(r=f(r," "));var a=!!t&&"boolean"==typeof t.cycles&&t.cycles,h=t&&t.replacer?s(t.replacer):d;if(t&&void 0!==t.collapseEmpty&&"boolean"!=typeof t.collapseEmpty)throw TypeError("`collapseEmpty` must be a boolean, if provided");var g=!!t&&t.collapseEmpty,y="function"==typeof t?t:t&&t.cmp,m=y&&function(e){var t=y.length>2&&function(t){return e[t]};return function(r,n){return y({key:r,value:e[r]},{key:n,value:e[n]},t?{__proto__:null,get:t}:void 0)}},b=[];return function e(t,s,d,y){var v=r?"\n"+f(y,r):"",E=r?": ":":";if(d&&d.toJSON&&"function"==typeof d.toJSON&&(d=d.toJSON()),void 0!==(d=h(t,s,d))){if("object"!=typeof d||null===d)return n(d);var x=function(e,t){return g&&0===e.length?t:("[]"===t?"[":"{")+l(e,",")+v+("[]"===t?"]":"}")};if(o(d)){for(var O=[],j=0;j<d.length;j++){var w=e(d,j,d[j],y+1)||n(null);O[O.length]=v+r+w}return x(O,"[]")}if(-1!==u(b,d)){if(a)return n("__cycle__");throw TypeError("Converting circular structure to JSON")}b[b.length]=d;for(var _=p(i(d),m&&m(d)),O=[],j=0;j<_.length;j++){var s=_[j],L=e(d,s,d[s],y+1);if(L){var P=n(s)+E+L;O[O.length]=v+r+P}}return c(b,u(b,d),1),x(O,"{}")}}({"":e},"",e,0)}},5303:(e,t)=>{"use strict";function r(e,t){if(!t)return e(t);switch(t.type){case"NoOpExpression":case"BooleanExpression":case"IntExpression":case"FloatExpression":case"StringExpression":case"RegexExpression":case"EnumExpression":case"VariableExpression":return e(t);case"ObjectExpression":return e(Object.assign(Object.assign({},t),{fields:Object.fromEntries(Object.entries(t.fields).map(([t,n])=>[t,r(e,n)]))}));case"GetFieldExpression":return e(Object.assign(Object.assign({},t),{object:r(e,t.object)}));case"UpdateObjectExpression":return e(Object.assign(Object.assign({},t),{object:r(e,t.object),updates:Object.fromEntries(Object.entries(t.updates).map(([t,n])=>[t,r(e,n)]))}));case"ListExpression":return e(Object.assign(Object.assign({},t),{items:t.items.map(t=>r(e,t))}));case"SwitchExpression":return e(Object.assign(Object.assign({},t),{control:r(e,t.control),cases:t.cases.map(t=>({id:t.id,when:r(e,t.when),then:r(e,t.then)})),default:r(e,t.default)}));case"EnumSwitchExpression":return e(Object.assign(Object.assign({},t),{control:r(e,t.control),cases:Object.fromEntries(Object.entries(t.cases).map(([t,n])=>[t,r(e,n)]))}));case"ComparisonExpression":case"ArithmeticExpression":return e(Object.assign(Object.assign({},t),{a:r(e,t.a),b:r(e,t.b)}));case"RoundNumberExpression":case"StringifyNumberExpression":return e(Object.assign(Object.assign({},t),{number:r(e,t.number)}));case"StringConcatExpression":return e(Object.assign(Object.assign({},t),{strings:r(e,t.strings)}));case"GetUrlQueryParameterExpression":return e(Object.assign(Object.assign({},t),{url:r(e,t.url),queryParameterName:r(e,t.queryParameterName)}));case"SplitExpression":return e(Object.assign(Object.assign({},t),{expose:r(e,t.expose),unitId:r(e,t.unitId),dimensionMapping:"discrete"===t.dimensionMapping.type?{type:"discrete",cases:Object.fromEntries(Object.entries(t.dimensionMapping.cases).map(([t,n])=>[t,r(e,n)]))}:{type:"continuous",function:r(e,t.dimensionMapping.function)},eventObjectTypeName:t.eventObjectTypeName,eventPayload:r(e,t.eventPayload)}));case"LogEventExpression":return e(Object.assign(Object.assign({},t),{unitId:r(e,t.unitId),eventPayload:r(e,t.eventPayload)}));case"FunctionExpression":return e(Object.assign(Object.assign({},t),{body:r(e,t.body)}));case"ApplicationExpression":return e(Object.assign(Object.assign({},t),{function:r(e,t.function),arguments:t.arguments.map(t=>r(e,t))}));default:throw Error(`Unexpected expression: ${JSON.stringify(t)}`)}}function n(e,t,n){return r(r=>{if(!r)return e(r);switch(r.type){case"NoOpExpression":case"BooleanExpression":case"IntExpression":case"FloatExpression":case"StringExpression":case"RegexExpression":case"EnumExpression":case"VariableExpression":return e(r);case"ObjectExpression":{let n=e(Object.assign(Object.assign({},r),{fields:Object.fromEntries(Object.entries(r.fields).map(([e,t])=>[e,t.newExpression]))}));return{newExpression:n.newExpression,mapResult:t(n.mapResult,...Object.values(r.fields).map(e=>e.mapResult))}}case"GetFieldExpression":{let n=e(Object.assign(Object.assign({},r),{object:r.object.newExpression}));return{newExpression:n.newExpression,mapResult:t(n.mapResult,r.object.mapResult)}}case"UpdateObjectExpression":{let n=e(Object.assign(Object.assign({},r),{object:r.object.newExpression,updates:Object.fromEntries(Object.entries(r.updates).map(([e,t])=>[e,t.newExpression]))}));return{newExpression:n.newExpression,mapResult:t(n.mapResult,r.object.mapResult,...Object.values(r.updates).map(e=>e.mapResult))}}case"ListExpression":{let n=e(Object.assign(Object.assign({},r),{items:r.items.map(e=>e.newExpression)}));return{newExpression:n.newExpression,mapResult:t(n.mapResult,...r.items.map(e=>e.mapResult))}}case"SwitchExpression":{let n=e(Object.assign(Object.assign({},r),{control:r.control.newExpression,cases:r.cases.map(e=>({id:e.id,when:e.when.newExpression,then:e.then.newExpression})),default:r.default.newExpression}));return{newExpression:n.newExpression,mapResult:t(n.mapResult,r.control.mapResult,...r.cases.map(e=>t(e.when.mapResult,e.then.mapResult)),r.default.mapResult)}}case"EnumSwitchExpression":{let n=e(Object.assign(Object.assign({},r),{control:r.control.newExpression,cases:Object.fromEntries(Object.entries(r.cases).map(([e,t])=>[e,t.newExpression]))}));return{newExpression:n.newExpression,mapResult:t(n.mapResult,r.control.mapResult,...Object.values(r.cases).map(e=>e.mapResult))}}case"ComparisonExpression":case"ArithmeticExpression":{let n=e(Object.assign(Object.assign({},r),{a:r.a.newExpression,b:r.b.newExpression}));return{newExpression:n.newExpression,mapResult:t(n.mapResult,r.a.mapResult,r.b.mapResult)}}case"RoundNumberExpression":case"StringifyNumberExpression":{let n=e(Object.assign(Object.assign({},r),{number:r.number.newExpression}));return{newExpression:n.newExpression,mapResult:t(n.mapResult,r.number.mapResult)}}case"StringConcatExpression":{let n=e(Object.assign(Object.assign({},r),{strings:r.strings.newExpression}));return{newExpression:n.newExpression,mapResult:t(n.mapResult,r.strings.mapResult)}}case"GetUrlQueryParameterExpression":{let n=e(Object.assign(Object.assign({},r),{url:r.url.newExpression,queryParameterName:r.queryParameterName.newExpression}));return{newExpression:n.newExpression,mapResult:t(n.mapResult,r.url.mapResult,r.queryParameterName.mapResult)}}case"SplitExpression":{let n=e(Object.assign(Object.assign({},r),{expose:r.expose.newExpression,unitId:r.unitId.newExpression,dimensionMapping:"discrete"===r.dimensionMapping.type?{type:"discrete",cases:Object.fromEntries(Object.entries(r.dimensionMapping.cases).map(([e,t])=>[e,t.newExpression]))}:{type:"continuous",function:r.dimensionMapping.function.newExpression},eventObjectTypeName:r.eventObjectTypeName,eventPayload:r.eventPayload.newExpression,featuresMapping:{}}));return{newExpression:n.newExpression,mapResult:t(n.mapResult,r.expose.mapResult,r.unitId.mapResult,r.eventPayload.mapResult,..."discrete"===r.dimensionMapping.type?Object.values(r.dimensionMapping.cases).map(e=>e.mapResult):[r.dimensionMapping.function.mapResult])}}case"LogEventExpression":{let n=e(Object.assign(Object.assign({},r),{eventObjectTypeName:r.eventObjectTypeName,eventPayload:r.eventPayload.newExpression,unitId:r.unitId.newExpression,featuresMapping:{}}));return{newExpression:n.newExpression,mapResult:t(n.mapResult,r.unitId.mapResult,r.eventPayload.mapResult)}}case"FunctionExpression":{let n=e(Object.assign(Object.assign({},r),{body:r.body.newExpression}));return{newExpression:n.newExpression,mapResult:t(n.mapResult,r.body.mapResult)}}case"ApplicationExpression":{let n=e(Object.assign(Object.assign({},r),{function:r.function.newExpression,arguments:r.arguments.map(e=>e.newExpression)}));return{newExpression:n.newExpression,mapResult:t(n.mapResult,r.function.mapResult,...r.arguments.map(e=>e.mapResult))}}default:throw Error(`Unexpected partial result: ${JSON.stringify(r)}`)}},n)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.mapExpressionWithResult=n,t.mapExpression=function(e,t){return n(t=>({newExpression:e(t),mapResult:null}),()=>null,t).newExpression}},8834:function(e,t,r){"use strict";var n,o=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return(n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&o(t,e,r[s]);return i(t,e),t}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n,o,i){var s,a,g,y,P;let S=(g=r,y=n,P=i,g?Object.assign(Object.assign({},g),{fragmentDefinitions:Object.fromEntries(Object.entries(g.fragmentDefinitions).map(([e,t])=>[e,j(g.variableDefinitions,t,y,P)])),fieldQuery:O(g.variableDefinitions,g.fieldQuery,y,P)}):null);return function e(t,r,n,o,i,s,a,g,y){if(a&&"FunctionExpression"!==y.type)throw Error(`Reduction arguments (${JSON.stringify(a)}) given for an expression that isn't a function (${JSON.stringify(y.type)}).`);let x=(0,h.mergeLogs)(y.logs,(0,h.getExpressionEvaluationCountLogs)(y));switch(y.type){case"NoOpExpression":case"BooleanExpression":case"IntExpression":case"FloatExpression":case"StringExpression":case"RegexExpression":case"EnumExpression":return y;case"ObjectExpression":{if(!s)return Object.assign(Object.assign({},y),{fields:Object.fromEntries(Object.keys(y.fields).map(s=>[s,e(t,r,n,o,i,null,null,g,(0,d.default)(y.fields[s],`Object expression has null field "${s}".`))]))});let a=s[y.objectTypeName],l=a?(0,E.default)(i,a).selection:{},u=Object.fromEntries(Object.keys(l).flatMap(s=>{let a=y.fields[s];if(!a)return[];let u=e(t,r,n,o,i,l[s].fieldQuery,null,g,a);return[[s,"FunctionExpression"===u.type?e(t,r,n,o,i,l[s].fieldQuery,[l[s].fieldArguments],g,u):u]]}));return Object.assign(Object.assign({},y),{fields:u})}case"GetFieldExpression":{let o=e(t,r,n,!0,i,null,null,g,(0,d.default)(y.object,"Get field expression has null object.")),s=function(e,t){let r=t.split(l.fieldPathSeparator),n=e;for(let e=0;e<r.length;e+=1){if(!n||"ObjectExpression"!==n.type)return null;let t=r[e];n=n.fields[t]||null}return n}(o,(0,d.default)(y.fieldPath,"Get field expression has null field path."));if(s){let e=(0,h.mergeLogs)(x,o.logs,s.logs);return Object.assign(Object.assign({},s),{logs:e})}let a=e(t,r,n,!1,i,null,null,g,(0,d.default)(y.object,"Get field expression has null object."));return Object.assign(Object.assign({},y),{object:a})}case"UpdateObjectExpression":{let a=e(t,r,n,o,i,s,null,g,(0,d.default)(y.object,"Update object expression has null object."));if("ObjectExpression"!==a.type)return Object.assign(Object.assign({},y),{object:a});let{objectTypeName:l}=a,u=s?s[l]:null,c=u?(0,E.default)(i,u).selection:null;Object.keys(y.updates).forEach(s=>{if(!c||c[s]){if(!a.fields[s])throw Error(`Update object expression has object with missing update field "${s}".`);let l=e(t,r,n,o,i,c?c[s].fieldQuery:null,null,g,(0,d.default)(y.updates[s],`Update object expression has null update "${s}".`));a.fields[s]=c&&"FunctionExpression"===l.type?e(t,r,n,o,i,c[s].fieldQuery,[c[s].fieldArguments],g,l):l}});let p=(0,h.mergeLogs)(x,a.logs);return Object.assign(Object.assign({},a),{logs:p})}case"ListExpression":return Object.assign(Object.assign({},y),{items:y.items.map((a,l)=>e(t,r,n,o,i,s,null,g,(0,d.default)(a,`List expression has null item at index ${l}.`)))});case"SwitchExpression":{let a=e(t,r,n,o,i,null,null,g,(0,d.default)(y.control,"Switch expression has null control.")),l=y.cases.map((a,l)=>({id:a.id,when:e(t,r,n,o,i,null,null,g,(0,d.default)(a.when,`Switch expression case has null 'when' at index ${l}.`)),then:e(t,r,n,o,i,s,null,g,(0,d.default)(a.then,`Switch expression case has null 'then' at index ${l}.`))})),u=e(t,r,n,o,i,s,null,g,(0,d.default)(y.default,"Switch expression has null default."));try{let{value:e,logs:t}=(0,c.default)(a),r=(0,h.mergeLogs)(x,t);for(let{when:t,then:n}of l){let{value:o,logs:i}=(0,c.default)(t);if(r=(0,h.mergeLogs)(r,i),w(e,o))return r=(0,h.mergeLogs)(r,n.logs),Object.assign(Object.assign({},n),{logs:r})}return r=(0,h.mergeLogs)(r,u.logs),Object.assign(Object.assign({},u),{logs:r})}catch(t){let{message:e}=(0,m.default)(t);if(e!==c.complexFormExpressionEvaluationError)throw t}return Object.assign(Object.assign({},y),{control:a,cases:l,default:u})}case"EnumSwitchExpression":{let a=e(t,r,n,o,i,null,null,g,(0,d.default)(y.control,"Enum switch expression has null control.")),l=Object.fromEntries(Object.keys(y.cases).map(a=>[a,e(t,r,n,o,i,s,null,g,(0,d.default)(y.cases[a],`Enum switch expression has null case "${a}".`))]));try{let{value:e,logs:t}=(0,c.default)(a);if("string"!=typeof e)throw Error("Evaluated control of enum switch expression is not a string.");let r=l[e];if(!r)throw Error(`Evaluated control of enum switch expression "${e}" is missing in cases.`);let n=(0,h.mergeLogs)(x,t,r.logs);return Object.assign(Object.assign({},r),{logs:n})}catch(t){let{message:e}=(0,m.default)(t);if(e!==c.complexFormExpressionEvaluationError)throw t}return Object.assign(Object.assign({},y),{control:a,cases:l})}case"ComparisonExpression":{let s=e(t,r,n,o,i,null,null,g,(0,d.default)(y.a,"Comparison expression has null a.")),a=e(t,r,n,o,i,null,null,g,(0,d.default)(y.b,"Comparison expression has null b."));try{let{value:e,logs:t}=(0,c.default)(s),{value:r,logs:n}=(0,c.default)(a),o=(0,h.mergeLogs)(x,t,n),i=(0,d.default)(y.operator,"Comparison expression has null operator.");switch(i){case"==":case"!=":{let t=w(e,r);return _("=="===i?t:!t,o)}case"<":if("number"!=typeof e||"number"!=typeof r)throw Error("Evaluated operands of comparison expression with '<' operator are not both numbers.");return _(e<r,o);case"<=":if("number"!=typeof e||"number"!=typeof r)throw Error("Evaluated operands of comparison expression with '<=' operator are not both numbers.");return _(e<=r,o);case">":if("number"!=typeof e||"number"!=typeof r)throw Error("Evaluated operands of comparison expression with '>' operator are not both numbers.");return _(e>r,o);case">=":if("number"!=typeof e||"number"!=typeof r)throw Error("Evaluated operands of comparison expression with '>=' operator are not both numbers.");return _(e>=r,o);case"AND":if("boolean"!=typeof e||"boolean"!=typeof r)throw Error("Evaluated operands of comparison expression with 'AND' operator are not both booleans.");return _(e&&r,o);case"OR":if("boolean"!=typeof e||"boolean"!=typeof r)throw Error("Evaluated operands of comparison expression with 'OR' operator are not both booleans.");return _(e||r,o);case"in":case"notIn":{if(!Array.isArray(r))throw Error(`Second evaluated operand of comparison expression with " +
                  "'${i}' operator is not an array.`);let t=r.some(t=>w(e,t));return _("in"===i?t:!t,o)}case"startsWith":case"notStartsWith":{let t="notStartsWith"===i;if("string"==typeof e&&"string"==typeof r){let n=e.startsWith(r);return _(t?!n:n,o)}if(Array.isArray(e)){let n=0!==e.length&&w(e[0],r);return _(t?!n:n,o)}throw Error(`Evaluated operands of comparison expression with '${i}'operator are not both strings or an array and an element.`)}case"endsWith":case"notEndsWith":{let t="notEndsWith"===i;if("string"==typeof e&&"string"==typeof r){let n=e.endsWith(r);return _(t?!n:n,o)}if(Array.isArray(e)){let n=0!==e.length&&w(e[e.length-1],r);return _(t?!n:n,o)}throw Error(`Evaluated operands of comparison expression with '${i}'operator are not both strings or an array and an element.`)}case"contains":case"notContains":{let t="notContains"===i;if("string"==typeof e&&"string"==typeof r){let n=e.includes(r);return _(t?!n:n,o)}if(Array.isArray(e)){let n=e.some(e=>w(e,r));return _(t?!n:n,o)}throw Error(`Evaluated operands of comparison expression with '${i}'operator are not both strings or an array and an element.`)}case"matches":case"notMatches":{if("string"!=typeof e||"string"!=typeof r)throw Error(`Evaluated operands of comparison expression with " +
                  "'${i}' operator are not both strings.`);let t=new RegExp(r).test(e);return _("matches"===i?t:!t,o)}default:throw Error(`unexpected operator: ${i}`)}}catch(t){let{message:e}=(0,m.default)(t);if(e!==c.complexFormExpressionEvaluationError)throw t}return Object.assign(Object.assign({},y),{a:s,b:a})}case"ArithmeticExpression":{let s=e(t,r,n,o,i,null,null,g,(0,d.default)(y.a,"Arithmetic expression has null a")),a=e(t,r,n,o,i,null,null,g,(0,d.default)(y.b,"Arithmetic expression has null b"));try{let{value:e,logs:t}=(0,c.default)(s),{value:r,logs:n}=(0,c.default)(a);if("number"!=typeof e||"number"!=typeof r)throw Error("Evaluated operands of arithmetic expression are not both numbers.");let o=(0,h.mergeLogs)(x,t,n),i=(0,d.default)(y.operator,"Arithmetic expression has null operator.");switch(i){case"+":return L(e+r,o);case"-":return L(e-r,o);case"*":return L(e*r,o);case"/":return L(e/r,o);case"POW":return L(Math.pow(e,r),o);case"MOD":return L(e%r,o);default:throw Error(`unexpected operator: ${i}`)}}catch(t){let{message:e}=(0,m.default)(t);if(e!==c.complexFormExpressionEvaluationError)throw t}return Object.assign(Object.assign({},y),{a:s,b:a})}case"RoundNumberExpression":{let s=e(t,r,n,o,i,null,null,g,(0,d.default)(y.number,"Round number expression has null number."));try{let{value:e,logs:t}=(0,c.default)(s);if("number"!=typeof e)throw Error("Evaluated number of round number expression is not a number.");let r=(0,p.getIntExpression)(Math.round(e),!0),n=(0,h.mergeLogs)(x,t,r.logs);return Object.assign(Object.assign({},r),{logs:n})}catch(t){let{message:e}=(0,m.default)(t);if(e!==c.complexFormExpressionEvaluationError)throw t}return Object.assign(Object.assign({},y),{number:s})}case"StringifyNumberExpression":{let s=e(t,r,n,o,i,null,null,g,(0,d.default)(y.number,"Stringify number expression has null number."));try{let{value:e,logs:t}=(0,c.default)(s);if("number"!=typeof e)throw Error("Evaluated number of stringify number expression is not a number.");let r=(0,p.getStringExpression)(e.toString(),!0),n=(0,h.mergeLogs)(x,t,r.logs);return Object.assign(Object.assign({},r),{logs:n})}catch(t){let{message:e}=(0,m.default)(t);if(e!==c.complexFormExpressionEvaluationError)throw t}return Object.assign(Object.assign({},y),{number:s})}case"StringConcatExpression":{let s=e(t,r,n,o,i,null,null,g,(0,d.default)(y.strings,"String concat expression has null strings."));try{let{value:e,logs:t}=(0,c.default)(s);if(!Array.isArray(e))throw Error("Evaluated strings of string concat expression is not an array.");if(!e.every(e=>"string"==typeof e))throw Error("Evaluated strings array of string concat expression contains a value that isn't a string.");let r=(0,p.getStringExpression)(e.join(""),!0),n=(0,h.mergeLogs)(x,t,r.logs);return Object.assign(Object.assign({},r),{logs:n})}catch(t){let{message:e}=(0,m.default)(t);if(e!==c.complexFormExpressionEvaluationError)throw t}return Object.assign(Object.assign({},y),{strings:s})}case"GetUrlQueryParameterExpression":{let s=e(t,r,n,o,i,null,null,g,(0,d.default)(y.url,"Get url query parameter expression has null url.")),a=e(t,r,n,o,i,null,null,g,(0,d.default)(y.queryParameterName,"Get url query parameter expression has null query parameter name."));try{let{value:e,logs:t}=(0,c.default)(s);if("string"!=typeof e)throw Error("Evaluated url of get url query parameter expression is not a string.");let{value:r,logs:n}=(0,c.default)(a);if("string"!=typeof r)throw Error("Evaluated query parameter name of get url query parameter expression is not a string.");let o="";try{o=new URL(e).searchParams.get(r)||""}catch(e){}let i=(0,p.getStringExpression)(o,!0),l=(0,h.mergeLogs)(x,t,n,i.logs);return Object.assign(Object.assign({},i),{logs:l})}catch(t){let{message:e}=(0,m.default)(t);if(e!==c.complexFormExpressionEvaluationError)throw t}return Object.assign(Object.assign({},y),{url:s,queryParameterName:a})}case"SplitExpression":{let a=(0,d.default)(t[(0,d.default)(y.splitId,"Split expression has null split ID.")],"Split expression has invalid split ID."),p=(0,d.default)(y.dimensionId,"Split expression has null dimension ID."),E=e(t,r,n,o,i,null,null,g,(0,d.default)(y.expose,"Split expression has null expose.")),O=e(t,r,n,o,i,null,null,g,(0,d.default)(y.unitId,"Split expression has null unit ID.")),j=y.eventPayload?e(t,r,n,o,i,null,null,g,y.eventPayload):null,w=y.dimensionMapping;if("discrete"!==w.type)throw Error("Split expression has dimension mapping which isn't discrete.");let _={type:"discrete",cases:Object.fromEntries(Object.keys(w.cases).map(a=>[a,e(t,r,n,o,i,s,null,g,(0,d.default)(w.cases[a],`Split expression has discrete dimension mapping with null case for arm "${a}".`))]))};try{let e,{value:t,logs:o}=(0,c.default)(E);if("boolean"!=typeof t)throw Error("Evaluated expose of split expression is not a boolean.");let{value:i,logs:s}=(0,c.default)(O);if("string"!=typeof i)throw Error("Evaluated unit ID of split expression is not a string.");let g=null,m=null,w=null,L=n.get(a.id,i);if(L)g=L.assignment,m=L.eventObjectTypeName,w=L.eventPayload,e=L.eventPayloadLogs;else{let t=j?(0,c.default)(j):{value:null,logs:{}};if(w=null===t.value?null:(0,v.default)(t.value,Error("Evaluated payload of split expression is not an object.")),e=t.logs,m=y.eventObjectTypeName,!!w!=!!m)throw Error("Evaluated payload of split expression or event object type name is missing.");g=function(e,t,r,n){if("test"===t.type){let e={};return Object.values(t.dimensions).forEach(n=>{if("discrete"!==n.type)throw Error(`Test split "${t.id}" has non-discrete dimension "${n.id}".`);let o=(0,f.default)(`${t.id}${n.id}${r}`)%l.numHashBuckets/l.numHashBuckets,i=Object.values(n.arms).sort((e,t)=>e.index-t.index),s=0,a=-1;for(;a+1<i.length&&s<=o;)s+=i[a+1].allocation,a+=1;let u=s>o?i[a].id:l.defaultArmKey;e[n.id]={type:"discrete",armId:u}}),e}let o=(0,d.default)(e.splitConfig[t.id],`No config for split "${t.id}".`),i={};if(Object.values(t.dimensions).forEach(e=>{if("discrete"!==e.type)throw Error(`ML split "${t.id}" has non-discrete dimension "${e.id}".`);let r=(0,u.default)(Object.values(e.arms),`ML split "${t.id}" has dimension "${e.id}" with no arms.`),n=r[Math.floor(Math.random()*r.length)].id;i[e.id]={type:"discrete",armId:n}}),"EpsilonGreedyConfig"===o.type){if(Math.random()<o.epsilon)return i;let e={};return Object.values(t.dimensions).forEach(r=>{let n=(0,d.default)(o.bestAssignment[r.id],`Best assignment has no dimension assignment for dimension "${r.id}" of ML split "${t.id}".`);e[r.id]=n}),e}if("PersonalizationSplitConfig"===o.type){if(Math.random()<o.epsilon)return i;let e={};return Object.values(t.dimensions).forEach(r=>{if("discrete"!==r.type)throw Error(`ML split "${t.id}" has non-discrete dimension "${r.id}".`);let s=o.logic[r.id];if(!s){e[r.id]=i[r.id];return}for(let{featureValuesPath:t,featureValue:o,armId:i}of s.rules)if((0,b.default)(n,t)===o&&r.arms[i]){e[r.id]={type:"discrete",armId:i};return}e[r.id]=r.arms[s.defaultArmId]?{type:"discrete",armId:s.defaultArmId}:i[r.id]}),e}throw Error(`Unexpected split config: ${JSON.stringify(o)}`)}(r,a,i,w),n.set(a.id,i,{assignment:g,eventObjectTypeName:m,eventPayloadLogs:e,eventPayload:w})}let P=t&&Object.values(g).some(e=>"discrete"!==e.type||e.armId!==l.defaultArmKey),S=(0,d.default)(g[p],"Split expression has invalid dimension ID.");if("continuous"===S.type)throw Error("Split expression has continuous dimension.");let A=(0,d.default)(_.cases[S.armId],`Split expression has reduced dimension mapping with missing case for assigned arm "${S.armId}".`),N=(0,h.mergeLogs)(x,o,s,e,P?(0,h.getExposureLogs)({splitId:a.id,unitId:i,event:w&&y.eventObjectTypeName?{objectTypeName:y.eventObjectTypeName,payload:w}:null,assignment:g}):void 0,A.logs);return Object.assign(Object.assign({},A),{logs:N})}catch(t){let{message:e}=(0,m.default)(t);if(e!==c.complexFormExpressionEvaluationError)throw t}return Object.assign(Object.assign({},y),{expose:E,unitId:O,dimensionMapping:_,eventPayload:j})}case"LogEventExpression":{let s=e(t,r,n,o,i,null,null,g,(0,d.default)(y.eventPayload,Error("Log event expression is missing event payload.")));try{let{value:e,logs:t}=(0,c.default)(s),r=(0,v.default)(e,Error("Evaluated payload of log event expression is not an object.")),n=(0,p.getNoOpExpression)(!0),o=(0,h.mergeLogs)(x,t,(0,h.getEventLogs)({objectTypeName:(0,d.default)(y.eventObjectTypeName,Error(`Log event expression with id "${y.id}" is missing event type name.`)),payload:r}),n.logs);return Object.assign(Object.assign({},n),{logs:o})}catch(t){let{message:e}=(0,m.default)(t);if(e!==c.complexFormExpressionEvaluationError)throw t}return Object.assign(Object.assign({},y),{eventPayload:s})}case"FunctionExpression":{if(Array.isArray(a)){if(y.parameters.length!==a.length)throw Error(`Function expression has ${y.parameters.length} parameters but was passed ${a.length} arguments.`);let u=Object.fromEntries(y.parameters.map((e,t)=>[e.id,a[t]])),c=e(t,r,n,o,i,s,null,Object.assign(Object.assign({},g),u),(0,d.default)(y.body,"Function expression has null body."));if(a.some(e=>"ObjectExpression"===e.type&&!!e.fields[l.isPartialObjectKey]))return Object.assign(Object.assign({},y),{body:c});let p=(0,h.mergeLogs)(x,c.logs);return Object.assign(Object.assign({},c),{logs:p})}let u=e(t,r,n,o,i,s,null,g,(0,d.default)(y.body,"Function expression has null body."));return Object.assign(Object.assign({},y),{body:u})}case"VariableExpression":{let u=g[y.variableId];if(!u)return y;let c=e(t,r,n,o,i,s,"FunctionExpression"===u.type?a:null,g,u);if(!o&&"ObjectExpression"===c.type&&c.fields[l.isPartialObjectKey])return y;let p=(0,h.mergeLogs)(x,c.logs);return Object.assign(Object.assign({},c),{logs:p})}case"ApplicationExpression":{let a=e(t,r,n,o,i,s,null,g,(0,d.default)(y.function,"Application expression has null function.")),l=y.arguments.map((s,a)=>e(t,r,n,o,i,null,null,g,(0,d.default)(s,`Application expression has null argument at index ${a}.`)));if("FunctionExpression"===a.type){let u=e(t,r,n,o,i,s,l,g,a),c=(0,h.mergeLogs)(x,u.logs);return Object.assign(Object.assign({},u),{logs:c})}return Object.assign(Object.assign({},y),{function:a,arguments:l})}default:throw Error(`Unexpected expression: ${JSON.stringify(y)}`)}}(e,t,function(){let e=new Map;return{get:(t,r)=>{var n;return null!=(n=e.get(x(t,r)))?n:null},set:(t,r,n)=>{e.set(x(t,r),n)}}}(),!1,null!=(s=null==S?void 0:S.fragmentDefinitions)?s:{},null!=(a=null==S?void 0:S.fieldQuery)?a:null,null,{},o)},t.areEqual=w;let l=r(58099),u=a(r(38604)),c=s(r(94119)),p=r(84458),f=a(r(70620)),d=a(r(76520)),h=r(11430),g=a(r(61968)),y=r(28815),m=a(r(26954)),b=a(r(62660)),v=a(r(61410)),E=a(r(76813));function x(e,t){return(0,g.default)({splitId:e,unitId:t})}function O(e,t,r,n){return Object.fromEntries(Object.entries(t).map(([t,o])=>[t,"InlineFragment"===o.type?j(e,o,r,n):o]))}function j(e,t,r,n){return{type:"InlineFragment",objectTypeName:t.objectTypeName,selection:Object.fromEntries(Object.entries(t.selection).map(([t,{fieldArguments:o,fieldQuery:i}])=>[t,{fieldArguments:(0,p.getAnonymousObjectExpression)(function e(t,r,n,o){var i;switch(typeof r){case"string":case"boolean":case"number":case"bigint":return r;case"object":if((0,y.isQueryVariable)(r)){let e=r.name;if(!(e in t))throw Error(`Unknown query variable ${e}`);let{defaultValue:s}=t[e];if(!(e in n)&&!s&&!o)throw Error(`Missing query variable ${e}`);return null!=(i=n[e])?i:s}if(Array.isArray(r))return r.map(r=>e(t,r,n,o));return Object.fromEntries(Object.entries(r).map(([r,i])=>[r,e(t,i,n,o)]).filter(([,e])=>void 0!==e));default:throw Error(`Unexpected value type: ${typeof r}`)}}(e,o,r,n),!0),fieldQuery:i?O(e,i,r,n):null}]))}}function w(e,t){return Array.isArray(e)?Array.isArray(t)&&e.length===t.length&&e.every((e,r)=>w(e,t[r])):"object"==typeof e&&null!==e?"object"==typeof t&&null!==t&&!Array.isArray(t)&&Object.keys(e).filter(e=>!e.startsWith("__")).length===Object.keys(t).filter(e=>!e.startsWith("__")).length&&Object.keys(e).filter(e=>!e.startsWith("__")).every(r=>w(e[r],t[r])):e===t}function _(e,t){let r=(0,p.getBooleanExpression)(e,!0),n=(0,h.mergeLogs)(t,r.logs);return Object.assign(Object.assign({},r),{logs:n})}function L(e,t){let r=Number.isInteger(e)?(0,p.getIntExpression)(e,!0):(0,p.getFloatExpression)(e,!0),n=(0,h.mergeLogs)(t,r.logs);return Object.assign(Object.assign({},r),{logs:n})}},11313:(e,t,r)=>{"use strict";var n=r(47545);e.exports=function(e){return n(e)||0===e?e:e<0?-1:1}},11430:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExpressionEvaluationCountLogs=function(e){return e.isTransient?{}:{evaluations:{[e.id]:1}}},t.getEventLogs=function(e){return{eventList:[e]}},t.getExposureLogs=function(e){return{exposureList:[e]}},t.mergeLogs=function(...e){let t=e.filter(Boolean);if(0===t.length)return{};if(1===t.length)return t[0];let r=t.flatMap(e=>{var t;return null!=(t=e.messageList)?t:[]}),n=t.flatMap(e=>{var t;return null!=(t=e.eventList)?t:[]}).concat(t.flatMap(e=>e.events?Object.entries(e.events).flatMap(([e,t])=>Array(t).fill(JSON.parse(e))):[])),o=t.flatMap(e=>{var t;return null!=(t=e.exposureList)?t:[]}).concat(t.flatMap(e=>e.exposures?Object.entries(e.exposures).flatMap(([e,t])=>Array(t).fill(JSON.parse(e))):[])),i=t.flatMap(e=>{var t;return null!=(t=e.evaluationList)?t:[]}),s=t.reduce((e,t)=>(t.evaluations&&Object.entries(t.evaluations).forEach(([t,r])=>{e[t]=(e[t]||0)+r}),e),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},r.length>0?{messageList:r}:{}),n.length>0?{eventList:n}:{}),o.length>0?{exposureList:o}:{}),i.length>0?{evaluationList:i}:{}),Object.keys(s).length>0?{evaluations:s}:{})}},11757:e=>{function t(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(void 0===r)if(!this._cachedTimeouts)return!1;else this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0},t.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,n=0;n<this._errors.length;n++){var o=this._errors[n],i=o.message,s=(e[i]||0)+1;e[i]=s,s>=r&&(t=o,r=s)}return t}},12512:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){e!==o.LogLevel.Debug&&(function(e){switch(e){case o.LogLevel.Error:return console.error;case o.LogLevel.Warn:return console.warn;case o.LogLevel.Info:return console.info;case o.LogLevel.Debug:return console.debug;default:throw Error(`Unknown log level: ${e}`)}})(e)(...(0,i.default)(t,r))};let o=r(26222),i=n(r(18189))},13108:(e,t,r)=>{"use strict";var n=r(67348),o=r(72019),i=r(41913);e.exports=function(){return i(n,o,arguments)}},14464:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(Number.isNaN(e instanceof Date?e.getTime():e))throw t instanceof Error?t:Error(t);return e}},14609:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatHashData=function({commitId:e,hash:t}){return`${e}_${t}`},t.parseHashData=function(e){let[t,...r]=e.split("_"),n=parseInt(t);return!r||!n||Number.isNaN(n)?null:{commitId:n,hash:r.join("_")}}},15255:(e,t,r)=>{"use strict";var n=Array.prototype.slice,o=r(78355),i=Object.keys,s=i?function(e){return i(e)}:r(72783),a=Object.keys;s.shim=function(){return Object.keys?!function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)&&(Object.keys=function(e){return o(e)?a(n.call(e)):a(e)}):Object.keys=s,Object.keys||s},e.exports=s},15458:(e,t,r)=>{"use strict";var n,o=r(23423),i=r(24915);try{n=[].__proto__===Array.prototype}catch(e){if(!e||"object"!=typeof e||!("code"in e)||"ERR_PROTO_ACCESS"!==e.code)throw e}var s=!!n&&i&&i(Object.prototype,"__proto__"),a=Object,l=a.getPrototypeOf;e.exports=s&&"function"==typeof s.get?o([s.get]):"function"==typeof l&&function(e){return l(null==e?e:a(e))}},18189:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return[`[Hypertune] [v${n.sdkVersion}] ${e}`,...Object.keys(t).length>0?[t]:[]]};let n=r(26222)},19255:(e,t,r)=>{"use strict";var n=r(90215),o=r(64854),i=r(23423),s=r(13108);e.exports=function(e){var t=i(arguments),r=e.length-(arguments.length-1);return n(t,1+(r>0?r:0),!0)},o?o(e.exports,"apply",{value:s}):e.exports.apply=s},19950:e=>{"use strict";e.exports=Math.floor},20189:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.codegenRequest=function(e){return n(this,arguments,void 0,function*({traceId:e,token:t,branchName:r,body:n,language:o,edgeBaseUrl:s,tracedFetch:a}){let u=Object.assign(Object.assign({},n),{sdkType:"js",sdkVersion:i.sdkVersion,language:o}),c=yield l({traceId:e,token:t,branchName:r,edgeBaseUrl:s,tracedFetch:a,requestType:"codegen",body:u}),p=JSON.parse(c);if(!p.files)throw Error(`[codegenRequest] unexpected response: ${c}`);return p})},t.initRequest=function(e){return n(this,arguments,void 0,function*({traceId:e,token:t,query:r,variables:n,branchName:o,edgeBaseUrl:s,tracedFetch:u}){let c={query:r,variables:n,sdkType:"js",sdkVersion:i.sdkVersion},p=yield l({traceId:e,token:t,branchName:o,body:c,edgeBaseUrl:s,tracedFetch:u,requestType:"init"}),f=(0,a.default)(p);if(!f.commitId)throw Error(`[initRequest] unexpected response: ${p}`);return f})},t.hashRequest=function(e){return n(this,arguments,void 0,function*({traceId:e,token:t,query:r,variables:n,branchName:o,edgeBaseUrl:a,tracedFetch:u}){let c={query:r,variables:n,sdkType:"js",sdkVersion:i.sdkVersion},p=yield l({traceId:e,token:t,branchName:o,body:c,edgeBaseUrl:a,tracedFetch:u,requestType:"hash"}),f=(0,s.parseHashData)(p);if(!f)throw Error(`[hashRequest] unexpected response: ${p}`);return f})},t.getEdgeRequestUrl=u;let i=r(26222),s=r(14609),a=o(r(55498));function l(e){return n(this,arguments,void 0,function*({traceId:e,token:t,branchName:r,requestType:n,body:o,edgeBaseUrl:i,tracedFetch:s}){let a=u({baseUrl:i,requestType:n,token:t,branchName:r,body:o});return(yield s(e,a,{method:"GET",headers:{"Cache-Control":"no-store"}})).text()})}function u({baseUrl:e,requestType:t,token:r,branchName:n,body:o}){return`${e}/${t}?token=${encodeURIComponent(r)}${n?`&branch=${encodeURIComponent(n)}`:""}&body=${encodeURIComponent(JSON.stringify(o))}`}},20677:e=>{"use strict";e.exports=Function.prototype.call},20970:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var o;let i=(o=e,(0,n.mapExpressionWithResult)(e=>{let t=new Set;return(null==e?void 0:e.type)==="SplitExpression"&&e.splitId&&t.add(e.splitId),{newExpression:e,mapResult:t}},(...e)=>{let t=new Set;return e.forEach(e=>e.forEach(e=>t.add(e))),t},o).mapResult);return{splits:Object.fromEntries(Object.entries(t).filter(([e])=>i.has(e))),commitConfig:{splitConfig:Object.fromEntries(Object.entries(r.splitConfig).filter(([e])=>i.has(e)))}}};let n=r(5303)},21498:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="2.7.2"},23423:(e,t,r)=>{"use strict";var n=r(67348),o=r(69344),i=r(20677),s=r(41913);e.exports=function(e){if(e.length<1||"function"!=typeof e[0])throw new o("a function is required");return s(n,i,e)}},24223:e=>{"use strict";e.exports=Object.getOwnPropertyDescriptor},24334:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=o(r(67940)),s=r(28815),a=o(r(91950)),l=o(r(71210)),u=o(r(34341)),c=r(58099);class p{constructor({traceId:e,token:t,createLogs:r,localLogger:n,flushIntervalMs:o}){this.queue={logs:[],evaluations:new Map,events:[],exposures:[]},this.shouldClose=!1,this.flushLogsTimeout=null,this.token=t,this.createLogs=r,this.localLogger=n,this.startFlushIntervals(e,o)}log(e,t,r,n,o){let{queue:i}=this;if(i.logs.length>1e3)return void this.localLogger(s.LogLevel.Debug,"Ignoring log, as more than 1000 in the queue already.",{});i.logs.push({commitId:r,type:e,level:t,message:n,metadataJson:JSON.stringify(o),createdAt:new Date().toJSON()})}evaluations(e,t){let{queue:r}=this,n=r.evaluations.get(e);n||(n=new Map,r.evaluations.set(e,n));let o=n;Object.entries(t).forEach(([e,t])=>{var r;o.set(e,(null!=(r=o.get(e))?r:0)+t)})}events(e,t){let{queue:r}=this;t.forEach(({objectTypeName:t,payload:n})=>r.events.push({commitId:e,eventObjectTypeName:t,eventPayloadJson:f(n),createdAt:new Date().toJSON()}))}exposures(e,t){let{queue:r}=this;t.forEach(({splitId:t,unitId:n,assignment:o,event:i})=>{var s,l;return r.exposures.push({commitId:e,splitId:t,unitId:n,assignment:Object.entries(o).map(([e,t])=>Object.assign({dimensionId:e,entryType:(0,a.default)(t.type)},"discrete"===t.type?{discreteArmId:t.armId}:{continuousValue:t.value})),eventObjectTypeName:null!=(s=null==i?void 0:i.objectTypeName)?s:null,eventPayloadJson:f(null!=(l=null==i?void 0:i.payload)?l:null),createdAt:new Date().toJSON()})})}flush(e){return n(this,void 0,void 0,function*(){let{queue:t,token:r,createLogs:n,localLogger:o}=this;if(!(t.logs.length>0||t.evaluations.size>0||t.events.length>0||t.exposures.length>0))return;let a=t.logs.length>0?t.logs[Math.floor(t.logs.length*Math.random())]:null,c={token:r,idempotencyKey:(0,l.default)(),logs:a?[a]:[],evaluations:[...t.evaluations.entries()].flatMap(([e,t])=>[...t.entries()].map(([t,r])=>({commitId:e,expressionId:t,count:r}))),events:t.events,exposures:t.exposures};t.logs=[],t.evaluations.clear(),t.events=[],t.exposures=[];try{yield(0,i.default)(t=>(o(s.LogLevel.Debug,`Attempt ${t} to flush logs to backend...`,{traceId:e,createLogsInput:c}),n(e,c)),{onFailedAttempt:t=>{o(s.LogLevel.Debug,`Attempt ${t.attemptNumber} to flush logs failed. There are ${t.retriesLeft} retries left.`,Object.assign(Object.assign({traceId:e},(0,u.default)(t)),{createLogsInput:c}))}}),o(s.LogLevel.Debug,"Successfully flushed logs to backend.",{traceId:e,createLogsInput:c})}catch(t){o(s.LogLevel.Error,"All attempts to flush logs failed. These logs will be lost.",Object.assign(Object.assign({traceId:e},(0,u.default)(t)),{createLogsInput:c}))}})}close(e){return n(this,void 0,void 0,function*(){this.shouldClose=!0,this.flushLogsTimeout&&(clearTimeout(this.flushLogsTimeout),this.flushLogsTimeout=null),yield this.flush(e)})}startFlushIntervals(e,t){if(!t)return void this.localLogger(s.LogLevel.Info,"Not automatically flushing logs.",{traceId:e});let r=()=>{this.flushLogsTimeout=setTimeout(()=>{let e=(0,l.default)();if(this.shouldClose){this.flushLogsTimeout=null,this.localLogger(s.LogLevel.Debug,"Stopped flushing log queue.",{traceId:e});return}this.flush(e).catch(t=>this.localLogger(s.LogLevel.Error,"Error flushing logs.",Object.assign(Object.assign({},(0,u.default)(t)),{traceId:e}))).finally(()=>{if(this.shouldClose){this.flushLogsTimeout=null,this.localLogger(s.LogLevel.Debug,"Stopped flushing log queue.",{traceId:e});return}r()})},t)};r()}}function f(e){return e?JSON.stringify(e,(e,t)=>e===c.graphqlTypeNameKey?void 0:t):null}t.default=p},24915:(e,t,r)=>{"use strict";var n=r(24223);if(n)try{n([],"length")}catch(e){n=null}e.exports=n},25366:e=>{"use strict";e.exports="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null},26222:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.sdkVersion=void 0,o(r(58099),t),o(r(48348),t),o(r(28815),t);var s=r(21498);Object.defineProperty(t,"sdkVersion",{enumerable:!0,get:function(){return i(s).default}})},26954:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e instanceof Error)return e;if("string"==typeof e)return Error(e);try{let t=JSON.stringify(e);if("string"!=typeof t)return Error("Error that stringified to non-string value.");return Error(t)}catch(e){return Error("Error that couldn't be stringified.")}}},27131:e=>{"use strict";e.exports=SyntaxError},27444:(e,t,r)=>{"use strict";e.exports=r(75997).getPrototypeOf||null},28815:(e,t,r)=>{"use strict";var n,o,i;Object.defineProperty(t,"__esModule",{value:!0}),t.DimensionType=t.LogType=t.LogLevel=t.requestTypes=t.ApplicationExpressionType=t.VariableExpressionType=t.FunctionExpressionType=t.LogEventExpressionType=t.ContinuousDimensionType=t.DiscreteDimensionType=t.SplitExpressionType=t.GetUrlQueryParameterExpressionType=t.StringConcatExpressionType=t.StringifyNumberExpressionType=t.RoundNumberExpressionType=t.ArithmeticExpressionType=t.arithmeticOperators=t.ComparisonExpressionType=t.EnumSwitchExpressionType=t.SwitchExpressionType=t.ListExpressionType=t.UpdateObjectExpressionType=t.GetFieldExpressionType=t.ObjectExpressionType=t.EnumExpressionType=t.RegexExpressionType=t.StringExpressionType=t.FloatExpressionType=t.IntExpressionType=t.BooleanExpressionType=t.NoOpExpressionType=void 0,t.isQueryVariable=function(e){return"object"==typeof e&&null!==e&&s.isQueryVariableKey in e};let s=r(58099);t.NoOpExpressionType="NoOpExpression",t.BooleanExpressionType="BooleanExpression",t.IntExpressionType="IntExpression",t.FloatExpressionType="FloatExpression",t.StringExpressionType="StringExpression",t.RegexExpressionType="RegexExpression",t.EnumExpressionType="EnumExpression",t.ObjectExpressionType="ObjectExpression",t.GetFieldExpressionType="GetFieldExpression",t.UpdateObjectExpressionType="UpdateObjectExpression",t.ListExpressionType="ListExpression",t.SwitchExpressionType="SwitchExpression",t.EnumSwitchExpressionType="EnumSwitchExpression",t.ComparisonExpressionType="ComparisonExpression",t.arithmeticOperators=["+","-","*","/","POW","MOD"],t.ArithmeticExpressionType="ArithmeticExpression",t.RoundNumberExpressionType="RoundNumberExpression",t.StringifyNumberExpressionType="StringifyNumberExpression",t.StringConcatExpressionType="StringConcatExpression",t.GetUrlQueryParameterExpressionType="GetUrlQueryParameterExpression",t.SplitExpressionType="SplitExpression",t.DiscreteDimensionType="discrete",t.ContinuousDimensionType="continuous",t.LogEventExpressionType="LogEventExpression",t.FunctionExpressionType="FunctionExpression",t.VariableExpressionType="VariableExpression",t.ApplicationExpressionType="ApplicationExpression",t.requestTypes=["codegen","graphql","init","hash","js","schema"],function(e){e.Debug="Debug",e.Error="Error",e.Info="Info",e.Warn="Warn"}(n||(t.LogLevel=n={})),function(e){e.Codegen="Codegen",e.GraphQl="GraphQL",e.Init="Init",e.Js="JS",e.SdkMessage="SDKMessage",e.SdkNode="SDKNode",e.Schema="Schema"}(o||(t.LogType=o={})),function(e){e.Continuous="Continuous",e.Discrete="Discrete"}(i||(t.DimensionType=i={}))},29884:e=>{"use strict";e.exports=Math.abs},31268:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({NodeConstructor:e=a.default,token:t,query:r=null,queryId:n,queryCode:g,variableValues:y={},override:m=null,options:b={}}){var v,E,x,O,j,w,_,L,P,S,A,N,T,I,D,R,M,F,$,C,U,k,B,V;let q,G=(0,o.uniqueId)(),H=(0,o.uniqueId)(),J=($=H,C=b.logsHandler,(U=b.localLogger)||C?e=>{let t=C||U?e.messageList.map(({level:e,message:t,metadata:r})=>({level:e,message:t,metadata:Object.assign({sdkVersion:o.sdkVersion,loggerId:$},r)})):e.messageList;if(C)return void C(Object.assign(Object.assign({},e),{messageList:t}));U&&t.forEach(({level:e,message:t,metadata:r})=>{U(e,t,r)})}:e=>{e.messageList.forEach(({level:e,message:t,metadata:r})=>(0,d.default)(e,t,r))}),W=(k=H,B=b.logsHandler,(V=b.localLogger)||B?(e,t,r)=>{let n=Object.assign({sdkVersion:o.sdkVersion,loggerId:k},r);if(B)return void B({messageList:[{level:e,message:t,metadata:n}],eventList:[],exposureList:[],evaluationList:[]});V&&V(e,t,n)}:d.default),z=null!=(E=null==(v=b.remoteLogging)?void 0:v.mode)?E:u.isBrowser?"session":"normal";try{q=new l.default({id:H,traceId:G,token:t,remoteLoggingMode:z,remoteFlushIntervalMs:(null==(x=b.remoteLogging)?void 0:x.flushIntervalMs)!==void 0?null===b.remoteLogging.flushIntervalMs||0===b.remoteLogging.flushIntervalMs?null:h(b.remoteLogging.flushIntervalMs):2e3,remoteLoggingEndpointUrl:null!=(j=null==(O=b.remoteLogging)?void 0:O.endpointUrl)?j:o.prodLogsEndpointUrl,logsHandler:J,localLogger:W})}catch(t){return W(i.LogLevel.Error,"Pre-initialize error.",(0,c.default)(t)),new e({context:null,logger:null,parent:null,step:null,expression:null,initDataHash:null})}let Q=b.initDataProvider&&b.initDataProvider instanceof f.default;q.log(i.LogLevel.Debug,null,"Detected environment.",{isBrowser:u.isBrowser,usesVercelEdgeConfig:Q});try{let i=new s.default({traceId:G,query:r,initQuery:n?{type:"StoredQuery",id:n}:g?{type:"GraphqlQuery",code:g}:{type:"Query",query:r},variableValues:y,initData:null!=(w=b.initData)?w:null,lastInitDataRefreshTime:null!=(L=null!=(_=b.lastInitDataRefreshTime)?_:b.lastDataProviderInitTime)?L:null,initDataProvider:void 0!==b.initDataProvider?b.initDataProvider:new p.default({token:t,baseUrl:o.prodEdgeCdnBaseUrl,branchName:b.branchName,localLogger:W}),initDataRefreshIntervalMs:h(null!=(P=b.initDataRefreshIntervalMs)?P:b.initIntervalMs||2e3),shouldRefreshInitData:null!=(A=null!=(S=b.shouldRefreshInitData)?S:b.shouldCheckForUpdates)?A:0!==b.initIntervalMs&&!Q,shouldRefreshInitDataOnCreate:null!=(N=b.shouldRefreshInitDataOnCreate)?N:!Q,shouldSkipInitDataUpdateOnRefresh:null!=(T=b.shouldSkipInitDataUpdateOnRefresh)&&T,logger:q,cacheSize:null!=(I=b.cacheSize)?I:o.defaultCacheSize,override:null!=m?m:null});return new e({context:i,logger:q,parent:null,step:null,expression:null!=(R=null==(D=i.initData)?void 0:D.reducedExpression)?R:null,initDataHash:null!=(F=null==(M=i.initData)?void 0:M.hash)?F:null})}catch(t){return q.log(i.LogLevel.Error,null,"Initialize error.",(0,c.default)(t)),new e({context:null,logger:q,parent:null,step:null,expression:null,initDataHash:null})}};let o=r(26222),i=r(28815),s=n(r(35691)),a=n(r(71572)),l=n(r(65292)),u=r(3257),c=n(r(34341)),p=n(r(33253)),f=n(r(88938)),d=n(r(12512));function h(e){return Math.max(e,1e3)}},31837:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){throw Error(e)}},33253:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let o=r(28815),i=r(20189),s=r(26222),a=n(r(46091)),l=n(r(12512));class u{constructor({baseUrl:e,token:t,branchName:r=null,localLogger:n=l.default,timeoutMs:i=1e4}){null!==r&&r!==s.defaultBranchName&&n(o.LogLevel.Warn,`using non default branch name: "${r}"`,{}),this.baseUrl=e,this.token=t,this.branchName=r,this.tracedFetch=(0,a.default)({timeoutMs:i,localLogger:n})}getName(){return"Hypertune Edge"}getInitData({traceId:e,initQuery:t,variableValues:r}){return(0,i.initRequest)({traceId:e,query:t,variables:r,token:this.token,branchName:this.branchName,edgeBaseUrl:this.baseUrl,tracedFetch:this.tracedFetch})}getHashData({traceId:e,initQuery:t,variableValues:r}){return(0,i.hashRequest)({traceId:e,query:t,variables:r,token:this.token,branchName:this.branchName,edgeBaseUrl:this.baseUrl,tracedFetch:this.tracedFetch})}}t.default=u},34341:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=(0,o.default)(e);return{errorName:t.name,errorMessage:t.message,errorStack:t.stack}};let o=n(r(26954))},34548:(e,t,r)=>{"use strict";var n=r(25366),o=r(27444),i=r(15458);e.exports=n?function(e){return n(e)}:o?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw TypeError("getProto: not an object");return o(e)}:i?function(e){return i(e)}:null},34880:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,...t){return t.reduce((e,t)=>(function e(t,r){var n,o,i,s;return null==r?t:Array.isArray(t)&&Array.isArray(r)?(n=t,(o=r).some(e=>null==e)?[...n,...o.slice(n.length)].map((t,r)=>e(t,o[r])).filter(e=>null!=e):o.map((t,r)=>e(n[r],t))):Array.isArray(t)||Array.isArray(r)||"object"!=typeof t||"object"!=typeof r?r:(i=t,s=r,Object.fromEntries(Object.entries(i).map(([t,r])=>[t,e(r,s[t])]).concat(Object.entries(s).filter(([e])=>!(e in i)))))})(e,t),e)}},35691:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=o(r(67940)),s=r(26222),a=r(3257),l=o(r(66629)),u=o(r(34341));class c{constructor({traceId:e,initData:t,lastInitDataRefreshTime:r,initDataProvider:o,initDataRefreshIntervalMs:i,shouldRefreshInitData:u,shouldRefreshInitDataOnCreate:c,shouldSkipInitDataUpdateOnRefresh:p,query:f,initQuery:d,variableValues:h,logger:g,cacheSize:y,override:m}){this.shouldClose=!1,this.updateTimeout=null,this.initData=null,this.lastInitDataRefreshTime=null,this.getFieldCache=null,this.getItemsCache=null,this.evaluateCache=null,this.override=null,this.initDataProvider=o,this.initDataRefreshIntervalMs=i,this.shouldSkipInitDataUpdateOnRefresh=p,this.query=f,this.initQuery=d,this.variableValues=h,this.updateListeners=new Map,this.logger=g,this.override=m,y>0&&(this.getFieldCache=new l.default(y),this.getItemsCache=new l.default(y),this.evaluateCache=new l.default(y)),t&&(this.log(e,s.LogLevel.Info,"Initializing from snapshot data..."),this.updateInitData(e,"snapshot",t,r)),this.initAndStartIntervals(e,c,u),a.isBrowser&&window.addEventListener("beforeunload",()=>n(this,void 0,void 0,function*(){this.shouldClose||(yield this.close((0,s.uniqueId)()))}))}updateInitData(e,t,r,n){var o,i,a,l,c,p,f;try{let u=null!=(i=null==(o=this.initData)?void 0:o.commitId)?i:-1,d=null!=(l=null==(a=this.initData)?void 0:a.hash)?l:"";if(r.commitId<u)return this.log(e,s.LogLevel.Info,`Skipped initialization from ${t} data as commit with id "${r.commitId}" isn't newer than "${u}".`),!1;if(r.commitId===u&&r.hash===d)return this.updateLastInitDataRefreshTime(n),this.log(e,s.LogLevel.Info,`Skipped initialization from ${t} data as commit id "${r.commitId}" with hash "${r.hash}" is already active.`),!1;let h=(0,s.prefixError)(()=>(0,s.reduce)(r.splits,r.commitConfig,this.query,this.variableValues,r.reducedExpression,!1),"Reduction Error: ");return this.initData=Object.assign(Object.assign({},r),{reducedExpression:h}),this.updateLastInitDataRefreshTime(n),this.log(e,s.LogLevel.Info,`Initialized successfully from ${t} data.`,{commitId:r.commitId,hash:r.hash}),null==(c=this.getFieldCache)||c.purge(),null==(p=this.getItemsCache)||p.purge(),null==(f=this.evaluateCache)||f.purge(),!0}catch(r){return this.log(e,s.LogLevel.Error,`Error initializing from ${t} data.`,(0,u.default)(r)),!1}}initIfNeeded(e,t){let{lastInitDataRefreshTime:r,initDataProvider:n,initDataRefreshIntervalMs:o}=this;if(!n)return this.log(e,s.LogLevel.Info,"Not initializing from data provider as it's null."),Promise.resolve();if(r){let t=Date.now()-r;if(t<o)return this.log(e,s.LogLevel.Debug,`Not initializing from data provider as already did ${t}ms ago which is less than the update interval of ${o}ms.`),Promise.resolve()}return this.initFromDataProvider(e,n,t)}initFromDataProvider(e,t,r){return this.withUpdateNotificationAsync(()=>n(this,void 0,void 0,function*(){let n=!0,o=t.getName();try{let i=null;if(this.initData){let n;if(n=t.getHashData?yield this.getHashData(e,t.getHashData.bind(t),r):{hash:(i=yield this.getInitData(e,o,t.getInitData.bind(t),r)).hash,commitId:i.commitId},this.initData.hash===n.hash)return this.log(e,s.LogLevel.Debug,"Commit hash is already latest."),this.updateLastInitDataRefreshTime(Date.now()),{updateTrigger:"initDataProvider",notify:!1,hasUpdated:!1};if(n.commitId<this.initData.commitId)return this.log(e,s.LogLevel.Info,`Skipped initialization from ${o} as hash data is for commit with ID "${n.commitId}" which isn't newer than "${this.initData.commitId}".`),{updateTrigger:"initDataProvider",notify:!1,hasUpdated:!1};if(this.log(e,s.LogLevel.Info,`Commit hash (${this.initData.hash}) is not latest (${n.hash}).`),this.shouldSkipInitDataUpdateOnRefresh)return{updateTrigger:"initDataProvider",notify:!0,hasUpdated:!1}}n=!1,this.log(e,s.LogLevel.Info,`Initializing from ${o}...`),i||(i=yield this.getInitData(e,o,t.getInitData.bind(t),r));let a=this.updateInitData(e,o,i,Date.now());return{updateTrigger:"initDataProvider",notify:a,hasUpdated:a}}catch(t){return this.log(e,s.LogLevel.Error,`All attempts to ${n?"check for updates":"initialize"} from ${o} failed.`,(0,u.default)(t)),{updateTrigger:"initDataProvider",notify:!1,hasUpdated:!1}}}))}getHashData(e,t,r){return n(this,void 0,void 0,function*(){return this.log(e,s.LogLevel.Debug,"Getting latest commit hash..."),yield(0,i.default)(r=>(this.log(e,s.LogLevel.Debug,`Attempt ${r} to get latest commit hash...`),t({traceId:e,initQuery:this.initQuery,variableValues:this.variableValues})),{retries:r,maxTimeout:6e3,onFailedAttempt:t=>{if(this.log(e,s.LogLevel.Debug,`Attempt ${t.attemptNumber} to get latest commit hash failed. There are ${t.retriesLeft} retries left.`,(0,u.default)(t)),this.shouldClose)throw new i.default.AbortError("Stopped trying to get latest commit hash.")}})})}getInitData(e,t,r,n){return(0,i.default)(n=>(this.log(e,s.LogLevel.Debug,`Attempt ${n} to initialize from ${t}...`),r({traceId:e,initQuery:this.initQuery,variableValues:this.variableValues})),{retries:n,maxTimeout:6e3,onFailedAttempt:r=>{if(this.log(e,s.LogLevel.Debug,`Attempt ${r.attemptNumber} to initialize from ${t} failed. There are ${r.retriesLeft} retries left.`,(0,u.default)(r)),this.shouldClose)throw new i.default.AbortError(`Stopped trying to initialize from ${t}.`)}})}initAndStartIntervals(e,t,r){if(!this.initDataProvider)return void this.log(e,s.LogLevel.Info,"Not checking for updates.");let n=this.initDataProvider.getName(),o=(e=(0,s.uniqueId)())=>{if(this.shouldClose){this.updateTimeout=null,this.log(e,s.LogLevel.Debug,`Stopped checking for updates from ${n}.`);return}this.initIfNeeded(e,s.defaultRetries).catch(t=>this.log(e,s.LogLevel.Error,`Error updating from ${n}.`,(0,u.default)(t))).finally(()=>{if(this.shouldClose){this.updateTimeout=null,this.log(e,s.LogLevel.Debug,`Stopped checking for updates from ${n}.`);return}r&&(this.updateTimeout=setTimeout(o,this.initDataRefreshIntervalMs))})};if(r?this.log(e,s.LogLevel.Info,`Started checking for updates from ${n}.`):this.log(e,s.LogLevel.Info,`Not checking for updates from ${n}.`),t&&!this.shouldSkipInitDataUpdateOnRefresh)return void o(e);r&&(this.updateTimeout=setTimeout(o,this.initDataRefreshIntervalMs))}isReady(){return this.initDataProvider?!!this.lastInitDataRefreshTime:!!this.initData}close(e){return n(this,void 0,void 0,function*(){this.log(e,s.LogLevel.Info,"Closing..."),this.shouldClose=!0,this.updateTimeout&&(clearTimeout(this.updateTimeout),this.updateTimeout=null),yield this.logger.close(e),this.log(e,s.LogLevel.Info,"Closed.")})}getStateHash(){var e,t;let r=null!=(t=null==(e=this.initData)?void 0:e.hash)?t:null,n=(0,s.stableStringify)(this.override),o=(0,s.stableStringify)(this.variableValues);return(0,s.hash)(`${o}/${r}/${n}`).toString()}addUpdateListener(e){this.updateListeners.set(e,!0)}removeUpdateListener(e){this.updateListeners.delete(e)}setOverride(e,t){this.withUpdateNotification(()=>({updateTrigger:"override",hasUpdated:this.updateOverride(e,t)}))}updateOverride(e,t){return(0,s.stableStringify)(t)===(0,s.stableStringify)(this.override)?(t&&this.log(e,s.LogLevel.Debug,"Skipped setting override as it's equal to the one already set."),!1):(this.override=t,this.log(e,s.LogLevel.Info,"Set override.",{override:t}),!0)}dehydrate(e,t){let r=this.initData?Object.assign({},this.initData):null;if(!r)return null;let{lastInitDataRefreshTime:n,override:o}=this,i=null!=e?e:this.query,a=null!=t?t:this.variableValues;r.reducedExpression=(0,s.prefixError)(()=>(0,s.reduce)(r.splits,r.commitConfig,i,a,r.reducedExpression,!1),"Reduction Error: ");let{splits:l,commitConfig:u}=(0,s.getSplitsAndCommitConfigForExpression)(r.reducedExpression,r.splits,r.commitConfig);return r.splits=l,r.commitConfig=u,{initData:r,lastInitDataRefreshTime:n,override:o,variableValues:a}}hydrate(e,t){return this.withUpdateNotification(()=>{var r;this.log(e,s.LogLevel.Info,"Hydrating...");let{initData:n,override:o,variableValues:i,lastInitDataRefreshTime:a}=t,l=(0,s.stableStringify)(this.variableValues)!==(0,s.stableStringify)(i);l&&(this.variableValues=i);let u=this.updateOverride(e,o),c=n&&n.hash!==(null==(r=this.initData)?void 0:r.hash);return c?c=this.updateInitData(e,"hydration",n,a):this.updateLastInitDataRefreshTime(a),this.log(e,s.LogLevel.Info,"Hydrated."),{updateTrigger:"hydration",hasUpdated:l||u||c}})}updateLastInitDataRefreshTime(e){if(!this.initDataProvider||!e)return;let t=Date.now();this.lastInitDataRefreshTime=e>t?t:e}withUpdateNotification(e){let t=this.isReady(),{updateTrigger:r,hasUpdated:n}=e();this.notifyUpdateListenersIfNeeded({notify:n,wasReady:t,updateTrigger:r,hasUpdated:n})}withUpdateNotificationAsync(e){return n(this,void 0,void 0,function*(){let t=this.isReady(),{updateTrigger:r,notify:n,hasUpdated:o}=yield e();this.notifyUpdateListenersIfNeeded({notify:n,wasReady:t,updateTrigger:r,hasUpdated:o})})}notifyUpdateListenersIfNeeded({notify:e,wasReady:t,updateTrigger:r,hasUpdated:n}){let o=this.getStateHash(),i=!t&&this.isReady();(i||e)&&this.updateListeners.forEach((e,t)=>{t(o,{becameReady:i,updateTrigger:r,hasUpdated:n})})}reduce(e,t){let{splits:r,commitConfig:n}=(0,s.nullThrows)(this.initData,"No init data so cannot reduce expression.");return(0,s.prefixError)(()=>(0,s.reduce)(r,n,e?{variableDefinitions:{},fragmentDefinitions:{},fieldQuery:e}:null,{},t,!1),"Reduction error: ")}log(e,t,r,n={}){var o,i;this.logger.log(t,null!=(i=null==(o=this.initData)?void 0:o.commitId.toString())?i:null,r,Object.assign({traceId:e},n))}}t.default=c},38604:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(0===e.length)throw Error(t);return e}},40749:(e,t,r)=>{e.exports=r(93723)},41483:(e,t,r)=>{"use strict";var n=r(64854),o=function(){return!!n};o.hasArrayLengthDefineBug=function(){if(!n)return null;try{return 1!==n([],"length",{value:1}).length}catch(e){return!0}},e.exports=o},41605:(e,t,r)=>{"use strict";var n=r(96452),o=r(23423),i=o([n("%String.prototype.indexOf%")]);e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&i(e,".prototype.")>-1?o([r]):r}},41701:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringify=function(e,t={}){let o=[],i=new Map,s=new Set;if(t.findDuplicates??!0){if(t.dictionaries)for(let[e,r]of Object.entries(t.dictionaries))for(let e of r)s.add(e);y(e,o,i,s)}if(t.dictionaries)for(let[e,n]of Object.entries(t.dictionaries)){if(!r.test(e))throw Error(`Invalid dictionary key: ${e}`);for(let t of(o.push(e,"@"),n))i.set(t,i.size)}return n(e,o,i),o.join("")},t.encodeB64=i,t.encodeBigB64=s,t.encodeSignedB64=a,t.encodeSignedBigB64=l,t.parseSignedB64=u,t.parseSignedBigB64=c,t.decodeSignedB64=function(e){return u(e,0,e.length)},t.decodeSignedBigB64=function(e){let t=_(e,0,e.length);return t%2n===0n?t/2n:-(t+1n)/2n},t.decodeBigB64=function(e){return _(e,0,e.length)},t.decodeB64=function(e){return j(e,0,e.length)},t.splitDecimal=f,t.writeDuplicates=y,t.parse=function(e,t={}){let r=[];r.dictionaries=t.dictionaries||{};let n=e.length,o=E(e,0);for(;o<n;){let{value:t,offset:n}=m(e,o,r);o=E(e,n),r.push(t)}return r.pop()},t.parseAny=m,t.skipWhitespace=E,t.skipB64=O,t.parseB64=j,t.parseBigB64=_;let r=/^([1-9a-zA-Z_-][0-9a-zA-Z_-]{0,7})$/;function n(e,t,r){let o=r.get(e);if(void 0!==o)return t.push(i(o),"*");if(null===e)return t.push("N!");if("boolean"==typeof e)return t.push(e?"!":"F!");if("number"==typeof e){var s,u,c=e,p=t;if(Number.isNaN(c))return p.push("n!");if(c===1/0)return p.push("I!");if(c===-1/0)return p.push("i!");let{base:r,exp:n}=f(c);return n>=0&&n<=4?(u=c,p.push("bigint"==typeof u?l(u):a(u),".")):p.push(a(n),":","bigint"==typeof r?l(r):a(r),".")}if("bigint"==typeof e){return s=e,t.push(l(s),".")}if("string"==typeof e)return d(e,t);if("object"==typeof e)return Array.isArray(e)?function(e,t,r){for(let o of(t.push("["),e))n(o,t,r);t.push("]")}(e,t,r):e instanceof Map?function(e,t,r){for(let[o,i]of(t.push("{"),e))n(o,t,r),n(i,t,r);t.push("}")}(e,t,r):function(e,t,r){for(let[o,s]of(t.push("{"),Object.entries(e)))!function(e,t,r){let n=r.get(e);void 0!==n?t.push(i(n),"*"):d(e,t)}(o,t,r),n(s,t,r);t.push("}")}(e,t,r);throw Error(`TODO: implement writeAny for ${typeof e}`)}let o="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_";function i(e){if(0===e)return"";let t=[],r=e;for(;r>0;){let e=r%64;r=Math.floor(r/64),t.push(o[e])}return t.reverse().join("")}function s(e){let t=[],r=e;for(;r>0n;){let e=Number(r%64n);r/=64n,t.push(o[e])}return t.reverse().join("")}function a(e){return e>=-0x80000000&&e<0x80000000?i((e>>31^e<<1)>>>0):e>=-0xfffffffffffff&&e<=0xfffffffffffff?i(e<0?-2*e-1:2*e):l(BigInt(e))}function l(e){return s(e<0n?-(2n*e)-1n:2n*e)}function u(e,t,r){if(r-t<=5){let n=j(e,t,r);return n>>1^-(1&n)}if(r-t<=8){let n=j(e,t,r);return n%2==0?n/2:-(n+1)/2}return Number(c(e,t,r))}function c(e,t,r){let n=_(e,t,r);return n%2n===0n?n/2n:-(n+1n)/2n}let p=/^(-?\d+)(?:\.(\d+))?e[+]?([-]?\d+)$/;function f(e){let t=e.toExponential().match(p);if(!t)throw Error(`Failed to split decimal for ${e}`);let[,r,n="",o]=t,i=r+n;return{base:i.length<16?Number.parseInt(i,10):v(BigInt(i)),exp:Number.parseInt(o,10)-n.length}}function d(e,t){return r.test(e)?t.push(e,"'"):t.push(i(e.length),"~",e)}function h([e,t]){return t>1}function g([e,t],[r,n]){return n-t}function y(e,t,r,o){let s=new Map;!function e(t,r){if(t){if("string"==typeof t||"number"==typeof t||"bigint"==typeof t)r.set(t,(r.get(t)||0)+1);else if(Array.isArray(t))for(let n of t)e(n,r);else if(t instanceof Map)for(let[n,o]of t)e(n,r),e(o,r);else if("object"==typeof t)for(let[n,o]of Object.entries(t))e(n,r),e(o,r)}}(e,s);let a=[...[...s.entries()].filter(h)].sort(g),l=[];for(let[e,s]of a){if(r.has(e)||o.has(e))continue;n(e,l,r);let s=l.join("");l.length=0;let a=i(r.size).length+1;s.length<=a||(r.set(e,r.size),t.push(s))}}function m(e,t,r){let n=E(e,t),o=e[n];if("["===o)return function(e,t,r){let n=[],o=e.length,i=E(e,t);for(;i<o;){if("]"===e[i])return{value:n,offset:i+1};let{value:t,offset:o}=m(e,i,r);n.push(t),i=E(e,o)}throw b(e,i)}(e,n+1,r);if("{"===o)return function(e,t,r){let n=[],o=!0,i=e.length,s=E(e,t);for(;s<i;){if("}"===e[s])return{value:o?Object.fromEntries(n):new Map(n),offset:s+1};let{value:t,offset:i}=m(e,s,r);"string"!=typeof t&&(o=!1);let{value:a,offset:l}=m(e,E(e,i),r);n.push([t,a]),s=E(e,l)}throw b(e,s)}(e,n+1,r);let i=O(e,n);if("'"===(o=e[i]))return{value:e.slice(n,i),offset:i+1};if("@"===o){let t=e.slice(n,i),o=r.dictionaries[t];if(!o)throw Error(`Unknown dictionary: ${t}`);for(let e of o)r.push(e);return m(e,i+1,r)}if("."===o)return i-n<=8?{value:u(e,n,i),offset:i+1}:{value:v(c(e,n,i)),offset:i+1};if("~"===o){let t=j(e,n,i);return{value:e.slice(i+1,i+1+t),offset:i+1+t}}if(":"===o){let t=O(e,i+1);if("."===e[t]){let r,o=u(e,n,i);return t-i-1<=8&&(r=u(e,i+1,t)),r=c(e,i+1,t),{value:Number.parseFloat(`${r}e${o}`),offset:t+1}}}if("!"===o){let t=j(e,n,i);if(0===t)return{value:!0,offset:i+1};if(41===t)return{value:!1,offset:i+1};if(49===t)return{value:null,offset:i+1};if(44===t)return{value:1/0,offset:i+1};if(18===t)return{value:-1/0,offset:i+1};if(23===t)return{value:0/0,offset:i+1}}if("*"===o){let t=r[j(e,n,i)];if(void 0!==t)return{value:t,offset:i+1}}throw b(e,t)}function b(e,t){return SyntaxError(`Invalid JSONito at offset ${t}: ${JSON.stringify(e.slice(t,t+10))}`)}function v(e){return e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER?e:Number(e)}function E(e,t){let r=e.length,n=t;for(;n<r;){let t=e[n];if(" "===t||"	"===t||"\n"===t||"\r"===t){n++;continue}if("/"===t){if("/"===e[n+1]){for(n+=2;n<r&&"\n"!==e[n];)n++;n++;continue}if("*"===e[n+1]){for(n+=2;n<r&&"*"!==e[n]&&"/"!==e[n+1];)n++;n+=2;continue}}break}return n}let x=new Set(o);function O(e,t){let r=e.length,n=t;for(;n<r&&x.has(e[n]);)n++;return n}function j(e,t,r){let n=0;for(let o=t;o<r;o++){let t=w.get(e[o]);if(void 0===t)throw Error(`Invalid base64 digit: ${e[o]}`);n=64*n+t}return n}let w=new Map([...o].map((e,t)=>[e,t]));function _(e,t,r){let n=0n;for(let o=t;o<r;o++){let t=w.get(e[o]);if(void 0===t)throw Error(`Invalid base64 digit: ${e[o]}`);n=64n*n+BigInt(t)}return n}},41913:(e,t,r)=>{"use strict";var n=r(67348),o=r(72019),i=r(20677);e.exports=r(89030)||n.call(i,o)},43126:e=>{"use strict";e.exports=Math.pow},44061:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(0===e.length)return null;let t=(0,i.default)({},...e.flatMap(([e,t])=>{if(null===t)return[];let r=e.split(".").reverse();return[{[r.pop()]:r.reduce((e,t)=>({[t]:e}),t)}]}));return 0===Object.keys(t).length?null:o.rootFieldName in t?t:{[o.rootFieldName]:t}};let o=r(58099),i=n(r(34880))},45614:(e,t,r)=>{"use strict";var n=r(64854),o=r(27131),i=r(69344),s=r(24915);e.exports=function(e,t,r){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new i("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new i("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new i("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new i("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new i("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new i("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,c=arguments.length>6&&arguments[6],p=!!s&&s(e,t);if(n)n(e,t,{configurable:null===u&&p?p.configurable:!u,enumerable:null===a&&p?p.enumerable:!a,value:r,writable:null===l&&p?p.writable:!l});else if(!c&&(a||l||u))throw new o("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");else e[t]=r}},46091:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({timeoutMs:e,localLogger:t}){return(r,o,l)=>n(this,void 0,void 0,function*(){t(s.LogLevel.Debug,`Fetching ${o}...`,Object.assign({traceId:r},l));let n=new AbortController,u=setTimeout(()=>n.abort(),e);try{let e=yield(0,i.default)(o,Object.assign(Object.assign({},l),{headers:Object.assign(Object.assign({},l.headers),{[a.traceIdHeaderName]:r}),signal:n.signal}));return t(s.LogLevel.Debug,`Successfully fetched ${o}`,{traceId:r,headers:Object.assign({},e.headers),status:e.status}),e}finally{clearTimeout(u)}})};let i=o(r(47398)),s=r(28815),a=r(58099)},47369:e=>{"use strict";e.exports=RangeError},47398:(e,t,r)=>{var n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r.g&&r.g,o=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n=void 0!==e&&e||"undefined"!=typeof self&&self||void 0!==r.g&&r.g||{},o={searchParams:"URLSearchParams"in n,iterable:"Symbol"in n&&"iterator"in Symbol,blob:"FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in n,arrayBuffer:"ArrayBuffer"in n};if(o.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(e){return e&&i.indexOf(Object.prototype.toString.call(e))>-1};function a(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function u(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return o.iterable&&(t[Symbol.iterator]=function(){return t}),t}function c(e){this.map={},e instanceof c?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){if(2!=e.length)throw TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function p(e){if(!e._noBody){if(e.bodyUsed)return Promise.reject(TypeError("Already read"));e.bodyUsed=!0}}function f(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function d(e){var t=new FileReader,r=f(t);return t.readAsArrayBuffer(e),r}function h(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){if(this.bodyUsed=this.bodyUsed,this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(o.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(o.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(o.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else{var t;o.arrayBuffer&&o.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=h(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||s(e))?this._bodyArrayBuffer=h(e):this._bodyText=e=Object.prototype.toString.call(e)}else this._noBody=!0,this._bodyText="";!this.headers.get("content-type")&&("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o.blob&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=p(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(o.blob)return this.blob().then(d);throw Error("could not read as ArrayBuffer")},this.text=function(){var e,t,r,n,o,i=p(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,r=f(t=new FileReader),o=(n=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?n[1]:"utf-8",t.readAsText(e,o),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},o.formData&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(e,t){e=a(e),t=l(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},c.prototype.delete=function(e){delete this.map[a(e)]},c.prototype.get=function(e){return e=a(e),this.has(e)?this.map[e]:null},c.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},c.prototype.set=function(e,t){this.map[a(e)]=l(t)},c.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},c.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),u(e)},c.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),u(e)},c.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),u(e)},o.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var y=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function m(e,t){if(!(this instanceof m))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,o,i=(t=t||{}).body;if(e instanceof m){if(e.bodyUsed)throw TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new c(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new c(t.headers)),this.method=(o=(r=t.method||this.method||"GET").toUpperCase(),y.indexOf(o)>-1?o:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in n)return new AbortController().signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),("GET"===this.method||"HEAD"===this.method)&&("no-store"===t.cache||"no-cache"===t.cache)){var s=/([?&])_=[^&]*/;s.test(this.url)?this.url=this.url.replace(s,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function b(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}}),t}function v(e,t){if(!(this instanceof v))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new c(t.headers),this.url=t.url||"",this._initBody(e)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},g.call(m.prototype),g.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var E=[301,302,303,307,308];v.redirect=function(e,t){if(-1===E.indexOf(t))throw RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},t.DOMException=n.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function x(e,r){return new Promise(function(i,s){var u=new m(e,r);if(u.signal&&u.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var p=new XMLHttpRequest;function f(){p.abort()}if(p.onload=function(){var e,t,r={statusText:p.statusText,headers:(e=p.getAllResponseHeaders()||"",t=new c,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();try{t.append(n,o)}catch(e){console.warn("Response "+e.message)}}}),t)};0===u.url.indexOf("file://")&&(p.status<200||p.status>599)?r.status=200:r.status=p.status,r.url="responseURL"in p?p.responseURL:r.headers.get("X-Request-URL");var n="response"in p?p.response:p.responseText;setTimeout(function(){i(new v(n,r))},0)},p.onerror=function(){setTimeout(function(){s(TypeError("Network request failed"))},0)},p.ontimeout=function(){setTimeout(function(){s(TypeError("Network request timed out"))},0)},p.onabort=function(){setTimeout(function(){s(new t.DOMException("Aborted","AbortError"))},0)},p.open(u.method,function(e){try{return""===e&&n.location.href?n.location.href:e}catch(t){return e}}(u.url),!0),"include"===u.credentials?p.withCredentials=!0:"omit"===u.credentials&&(p.withCredentials=!1),"responseType"in p&&(o.blob?p.responseType="blob":o.arrayBuffer&&(p.responseType="arraybuffer")),r&&"object"==typeof r.headers&&!(r.headers instanceof c||n.Headers&&r.headers instanceof n.Headers)){var d=[];Object.getOwnPropertyNames(r.headers).forEach(function(e){d.push(a(e)),p.setRequestHeader(e,l(r.headers[e]))}),u.headers.forEach(function(e,t){-1===d.indexOf(t)&&p.setRequestHeader(t,e)})}else u.headers.forEach(function(e,t){p.setRequestHeader(t,e)});u.signal&&(u.signal.addEventListener("abort",f),p.onreadystatechange=function(){4===p.readyState&&u.signal.removeEventListener("abort",f)}),p.send(void 0===u._bodyInit?null:u._bodyInit)})}x.polyfill=!0,n.fetch||(n.fetch=x,n.Headers=c,n.Request=m,n.Response=v),t.Headers=c,t.Request=m,t.Response=v,t.fetch=x}({})}(o),o.fetch.ponyfill=!0,delete o.fetch.polyfill;var i=n.fetch?n:o;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t},47545:e=>{"use strict";e.exports=Number.isNaN||function(e){return e!=e}},48348:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueId=t.toDimensionTypeEnum=t.throws=t.stableStringify=t.RemoteLogger=t.reduce=t.prefixError=t.nullThrows=t.nanThrows=t.mapExpressionWithResult=t.mapExpression=t.fold=t.parseHashData=t.formatHashData=t.hash=t.getSplitsAndCommitConfigForExpression=t.getInlineFragment=t.complexFormExpressionEvaluationError=t.evaluate=t.emptyThrows=t.asError=void 0;var s=r(26954);Object.defineProperty(t,"asError",{enumerable:!0,get:function(){return i(s).default}});var a=r(38604);Object.defineProperty(t,"emptyThrows",{enumerable:!0,get:function(){return i(a).default}});var l=r(94119);Object.defineProperty(t,"evaluate",{enumerable:!0,get:function(){return i(l).default}}),Object.defineProperty(t,"complexFormExpressionEvaluationError",{enumerable:!0,get:function(){return l.complexFormExpressionEvaluationError}}),o(r(84458),t);var u=r(76813);Object.defineProperty(t,"getInlineFragment",{enumerable:!0,get:function(){return i(u).default}});var c=r(20970);Object.defineProperty(t,"getSplitsAndCommitConfigForExpression",{enumerable:!0,get:function(){return i(c).default}});var p=r(70620);Object.defineProperty(t,"hash",{enumerable:!0,get:function(){return i(p).default}});var f=r(14609);Object.defineProperty(t,"formatHashData",{enumerable:!0,get:function(){return f.formatHashData}}),Object.defineProperty(t,"parseHashData",{enumerable:!0,get:function(){return f.parseHashData}});var d=r(5303);Object.defineProperty(t,"fold",{enumerable:!0,get:function(){return i(d).default}}),Object.defineProperty(t,"mapExpression",{enumerable:!0,get:function(){return d.mapExpression}}),Object.defineProperty(t,"mapExpressionWithResult",{enumerable:!0,get:function(){return d.mapExpressionWithResult}});var h=r(14464);Object.defineProperty(t,"nanThrows",{enumerable:!0,get:function(){return i(h).default}});var g=r(76520);Object.defineProperty(t,"nullThrows",{enumerable:!0,get:function(){return i(g).default}});var y=r(2818);Object.defineProperty(t,"prefixError",{enumerable:!0,get:function(){return i(y).default}});var m=r(8834);Object.defineProperty(t,"reduce",{enumerable:!0,get:function(){return i(m).default}});var b=r(24334);Object.defineProperty(t,"RemoteLogger",{enumerable:!0,get:function(){return i(b).default}}),o(r(11430),t);var v=r(61968);Object.defineProperty(t,"stableStringify",{enumerable:!0,get:function(){return i(v).default}});var E=r(31837);Object.defineProperty(t,"throws",{enumerable:!0,get:function(){return i(E).default}});var x=r(91950);Object.defineProperty(t,"toDimensionTypeEnum",{enumerable:!0,get:function(){return i(x).default}});var O=r(71210);Object.defineProperty(t,"uniqueId",{enumerable:!0,get:function(){return i(O).default}})},51571:e=>{var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},53733:e=>{"use strict";e.exports=ReferenceError},54426:e=>{"use strict";var t=Object.prototype.toString,r=Math.max,n=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var o=0;o<t.length;o+=1)r[o+e.length]=t[o];return r},o=function(e,t){for(var r=[],n=t||0,o=0;n<e.length;n+=1,o+=1)r[o]=e[n];return r},i=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r};e.exports=function(e){var s,a=this;if("function"!=typeof a||"[object Function]"!==t.apply(a))throw TypeError("Function.prototype.bind called on incompatible "+a);for(var l=o(arguments,1),u=r(0,a.length-l.length),c=[],p=0;p<u;p++)c[p]="$"+p;if(s=Function("binder","return function ("+i(c,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof s){var t=a.apply(this,n(l,arguments));return Object(t)===t?t:this}return a.apply(e,n(l,arguments))}),a.prototype){var f=function(){};f.prototype=a.prototype,s.prototype=new f,f.prototype=null}return s}},54692:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,r,n,i=!1){return r?Object.fromEntries(Object.entries(r).map(([r,s])=>{let a=i?n&&n[r]&&n[r]instanceof Object?n[r]:null:n;return[r,{type:"InlineFragment",objectTypeName:r,selection:Object.fromEntries(Object.entries((0,o.default)(t,s).selection).map(([r,{fieldQuery:n}])=>{let o=a&&a[r]&&a[r]instanceof Object?a[r]:null;return[r,{fieldArguments:Object.assign({},o&&o.args?o.args:{}),fieldQuery:n?e(t,n,o,!0):null}]}))}]})):null};let o=n(r(76813))},55498:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.startsWith(o.jsonitoResponsePrefix)?(0,n.parse)(e.slice(o.jsonitoResponsePrefix.length)):JSON.parse(e)};let n=r(41701),o=r(26222)},57604:(e,t)=>{"use strict";function r(e){return e&&e.length>0?`at ${e.join(".")}`:""}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if("object"!=typeof e)throw Error(`value with type ${typeof e} is not an object`);!function e(t,n){if(null==t)throw Error(`null value is not allowed ${r(n)}`);if(Array.isArray(t)){if(0===t.length)return;let o=typeof t[0];t.forEach((t,i)=>{if(typeof t!==o)throw Error(`item has different type than the first item ${r([...n,i.toString()])}`);e(t,[...n,i.toString()])});return}let o=typeof t;switch(o){case"boolean":case"number":case"string":return;case"object":Object.entries(t).forEach(([t,r])=>{e(r,[...n,t])});break;default:throw Error(`value with type ${o} is not allowed ${r(n)}`)}}(e,[])}},58099:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jsonitoResponsePrefix=t.defaultBranchName=t.breakingSchemaChangesError=t.defaultCacheSize=t.defaultRetries=t.rootFieldName=t.defaultArmKey=t.numHashBuckets=t.fieldPathSeparator=t.isQueryVariableKey=t.isPartialObjectKey=t.graphqlTypeNameKey=t.tokenEnvironmentVariableName=t.configFileName=t.traceIdHeaderName=t.prodLogsEndpointUrl=t.prodEdgeCdnBaseUrl=t.stagingLogsEndpointUrl=t.stagingEdgeCdnBaseUrl=t.localLogsEndpointUrl=t.localEdgeWorkerBaseUrl=t.logsCreationEndpoint=void 0,t.logsCreationEndpoint="/logs",t.localEdgeWorkerBaseUrl="http://localhost:3002",t.localLogsEndpointUrl=`http://localhost:3003${t.logsCreationEndpoint}`,t.stagingEdgeCdnBaseUrl="https://hypertune-edge-staging.b-cdn.net",t.stagingLogsEndpointUrl=`https://gcp-staging.fasthorse.workers.dev${t.logsCreationEndpoint}`,t.prodEdgeCdnBaseUrl="https://edge.hypertune.com",t.prodLogsEndpointUrl=`https://gcp.fasthorse.workers.dev${t.logsCreationEndpoint}`,t.traceIdHeaderName="x-hypertune-trace-id",t.configFileName="hypertune.json",t.tokenEnvironmentVariableName="HYPERTUNE_TOKEN",t.graphqlTypeNameKey="__typename",t.isPartialObjectKey="__isPartialObject__",t.isQueryVariableKey="__isVariable",t.fieldPathSeparator=" > ",t.numHashBuckets=1e4,t.defaultArmKey="default",t.rootFieldName="root",t.defaultRetries=10,t.defaultCacheSize=250,t.breakingSchemaChangesError="If you've made breaking changes to your schema like adding a new field argument, you may need to re-run code generation and fix the type errors.",t.defaultBranchName="main",t.jsonitoResponsePrefix="jsonito_"},58724:e=>{"use strict";var t,r,n,o={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"};function i(e){throw{name:"SyntaxError",message:e,at:t,text:n}}function s(e){return e&&e!==r&&i("Expected '"+e+"' instead of '"+r+"'"),r=n.charAt(t),t+=1,r}function a(){var e,t="";for("-"===r&&(t="-",s("-"));r>="0"&&r<="9";)t+=r,s();if("."===r)for(t+=".";s()&&r>="0"&&r<="9";)t+=r;if("e"===r||"E"===r)for(t+=r,s(),("-"===r||"+"===r)&&(t+=r,s());r>="0"&&r<="9";)t+=r,s();return isFinite(e=Number(t))||i("Bad number"),e}function l(){var e,t,n,a="";if('"'===r)for(;s();)if('"'===r)return s(),a;else if("\\"===r)if(s(),"u"===r){for(t=0,n=0;t<4&&isFinite(e=parseInt(s(),16));t+=1)n=16*n+e;a+=String.fromCharCode(n)}else if("string"==typeof o[r])a+=o[r];else break;else a+=r;i("Bad string")}function u(){for(;r&&r<=" ";)s()}function c(){switch(u(),r){case"{":var e,t={};if("{"===r){if(s("{"),u(),"}"===r)return s("}"),t;for(;r;){if(e=l(),u(),s(":"),Object.prototype.hasOwnProperty.call(t,e)&&i('Duplicate key "'+e+'"'),t[e]=c(),u(),"}"===r)return s("}"),t;s(","),u()}}i("Bad object");return;case"[":var n=[];if("["===r){if(s("["),u(),"]"===r)return s("]"),n;for(;r;){if(n.push(c()),u(),"]"===r)return s("]"),n;s(","),u()}}i("Bad array");return;case'"':return l();case"-":return a();default:return r>="0"&&r<="9"?a():function(){switch(r){case"t":return s("t"),s("r"),s("u"),s("e"),!0;case"f":return s("f"),s("a"),s("l"),s("s"),s("e"),!1;case"n":return s("n"),s("u"),s("l"),s("l"),null;default:i("Unexpected '"+r+"'")}}()}}e.exports=function(e,o){var s;return n=e,t=0,r=" ",s=c(),u(),r&&i("Syntax error"),"function"==typeof o?function e(t,r){var n,i,s=t[r];if(s&&"object"==typeof s)for(n in c)Object.prototype.hasOwnProperty.call(s,n)&&(void 0===(i=e(s,n))?delete s[n]:s[n]=i);return o.call(t,r,s)}({"":s},""):s}},61111:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,r){return`${t?`${e(t.props.parent,t.props.step)} > `:""}${!r?"{}":"GetFieldStep"===r.type?`${r.fieldName}(${JSON.stringify(r.fieldArguments)})`:`[${r.index}]`}`},t.getJsonNodePathAndArgs=function e(t,r){let{path:n,args:o}=t?e(t.props.parent,t.props.step):{path:"",args:{}},i=`${n}${!r?"":"GetFieldStep"===r.type?`${n?".":""}${r.fieldName}`:`[${r.index}]`}`;return r&&"GetFieldStep"===r.type&&Object.keys(r.fieldArguments).length>0&&(o[i]=r.fieldArguments),{path:i,args:o}}},61410:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!e||Array.isArray(e)||"object"!=typeof e)throw t;return e}},61910:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StringNode=t.FloatNode=t.IntNode=t.BooleanNode=t.VoidNode=void 0;let o=n(r(71572));class i extends o.default{constructor(){super(...arguments),this.typeName="Void"}get(e={}){let t=this.getValue({fallback:"fallback"});!0!==t&&this.logUnexpectedValueError(t)}}t.VoidNode=i;class s extends o.default{constructor(){super(...arguments),this.typeName="Boolean"}get({fallback:e}){let t=this.getValue({fallback:e});return"boolean"==typeof t?t:(this.logUnexpectedValueError(t),e)}}t.BooleanNode=s;class a extends o.default{constructor(){super(...arguments),this.typeName="Int"}get({fallback:e}){let t=this.getValue({fallback:e});return"number"==typeof t&&Number.isInteger(t)?t:(this.logUnexpectedValueError(t),e)}}t.IntNode=a;class l extends o.default{constructor(){super(...arguments),this.typeName="Float"}get({fallback:e}){let t=this.getValue({fallback:e});return"number"==typeof t?t:(this.logUnexpectedValueError(t),e)}}t.FloatNode=l;class u extends o.default{constructor(){super(...arguments),this.typeName="String"}get({fallback:e}){let t=this.getValue({fallback:e});return"string"==typeof t?t:(this.logUnexpectedValueError(t),e)}}t.StringNode=u},61968:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;return null!=(t=(0,o.default)(e))?t:"null"};let o=n(r(4440))},62660:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let r=e;for(let e of t){if(void 0===r)return;r=r[e]}return r}},64854:e=>{"use strict";var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch(e){t=!1}e.exports=t},65292:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=r(26222),s=o(r(24334)),a=o(r(66629)),l=o(r(99297)),u=o(r(46091));class c{constructor({id:e,traceId:t,token:r,remoteLoggingMode:o,remoteFlushIntervalMs:l,remoteLoggingEndpointUrl:c,localLogger:p,logsHandler:f}){this.remoteLogCache=new a.default(1e4),this.id=e,this.remoteLoggingMode=o,this.logsHandler=f,this.localLogger=p,this.remoteLogger="off"===o?null:new s.default({traceId:t,token:r,createLogs:function(e,t){return(r,o)=>n(this,void 0,void 0,function*(){let n=JSON.stringify(o),i=new Blob([n]),s=yield e(r,t,{method:"POST",headers:{"Content-Type":"application/json","Cache-Control":"no-store"},body:n,keepalive:i.size<64e3});if(!s.ok)throw Error(`Failed to create logs status: "${s.status}" response: "${yield s.text()}"`);let a=yield s.json();if(!a.success)throw Error(`Failed to create logs status: "${s.status}" response: "${JSON.stringify(a)}"`)})}((0,u.default)({timeoutMs:2e4,localLogger:this.localLogger}),c),localLogger:this.localLogger,flushIntervalMs:l}),"off"===o&&this.localLogger(i.LogLevel.Info,"Remote logging is disabled.",{traceId:t})}nodeLog({commitId:e,initDataHash:t,nodeTypeName:r,nodePath:n,nodeExpression:o,reductionLogs:s}){var a,l,u,c,p,f,d,h,g;let y={sdkVersion:i.sdkVersion,nodeTypeName:r,nodePath:n,nodeExpression:o,reductionLogs:s};if(this.logsHandler({messageList:null!=(a=s.messageList)?a:[],eventList:null!=(l=s.eventList)?l:[],exposureList:null!=(u=s.exposureList)?u:[],evaluationList:null!=(c=s.evaluationList)?c:[]}),null==(p=s.messageList)||p.forEach(({level:o,message:s,metadata:a})=>{var l;let u=`${r}Node at ${n}: ${s}`,c=Object.assign(Object.assign({},y),a);(o===i.LogLevel.Warn||o===i.LogLevel.Error)&&this.shouldRemoteNodeLog(t,n,s)&&(null==(l=this.remoteLogger)||l.log(i.LogType.SdkNode,o,e,u,c))}),s&&(s.evaluations||s.eventList||s.exposureList)){if(!e){let o=`${r}Node at ${n}: Missing commitId so cannot remote log evaluations, events and exposures.`;this.localLogger(i.LogLevel.Error,o,y),this.shouldRemoteNodeLog(t,n,o)&&(null==(f=this.remoteLogger)||f.log(i.LogType.SdkNode,i.LogLevel.Error,e,o,y));return}s.evaluations&&this.shouldRemoteNodeLog(t,n,"evaluations")&&(null==(d=this.remoteLogger)||d.evaluations(e,s.evaluations)),s.eventList&&(null==(h=this.remoteLogger)||h.events(e,s.eventList)),s.exposureList&&this.shouldRemoteNodeLog(t,n,"exposures")&&(null==(g=this.remoteLogger)||g.exposures(e,s.exposureList))}}shouldRemoteNodeLog(e,t,r){switch(this.remoteLoggingMode){case"session":{let n=(0,l.default)(null!=e?e:"",t,r);if(this.remoteLogCache.get(n))return this.localLogger(i.LogLevel.Debug,"Remote log cache hit.",{initDataHash:e,nodePath:t,cacheKeySuffix:r}),!1;return this.remoteLogCache.set(n,!0),!0}case"normal":return!0;case"off":return!1;default:{let e=this.remoteLoggingMode;throw Error(`Unexpected logging mode: ${e}`)}}}log(e,t,r,n){var o;this.localLogger(e,r,n),"off"!==this.remoteLoggingMode&&(e===i.LogLevel.Warn||e===i.LogLevel.Error)&&(null==(o=this.remoteLogger)||o.log(i.LogType.SdkMessage,e,t,r,Object.assign(Object.assign({},n),{sdkVersion:i.sdkVersion})))}flush(e){return this.remoteLogger?this.remoteLogger.flush(e):Promise.resolve()}close(e){return this.remoteLogger?this.remoteLogger.close(e):Promise.resolve()}}t.default=c},66629:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this.maxSize=e,this.cache=new Map}get(e){if(!this.cache.has(e))return null;let t=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,t),t}set(e,t){for(this.cache.delete(e);this.cache.size>=this.maxSize;)this.cache.delete(this.cache.keys().next().value);this.cache.set(e,t)}purge(){this.cache=new Map}}t.default=r},67303:e=>{e.exports={nanoid:(e=21)=>{let t="",r=0|e;for(;r--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},customAlphabet:(e,t=21)=>(r=t)=>{let n="",o=0|r;for(;o--;)n+=e[Math.random()*e.length|0];return n}}},67348:(e,t,r)=>{"use strict";var n=r(54426);e.exports=Function.prototype.bind||n},67940:(e,t,r)=>{"use strict";let n=r(40749),o=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class i extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}let s=(e,t)=>new Promise((r,s)=>{t={onFailedAttempt:()=>{},retries:10,...t};let a=n.operation(t);a.attempt(async n=>{try{r(await e(n))}catch(e){if(!(e instanceof Error))return void s(TypeError(`Non-error was thrown: "${e}". You should only throw errors.`));if(e instanceof i)a.stop(),s(e.originalError);else{let r;if(e instanceof TypeError&&(r=e.message,!o.includes(r)))a.stop(),s(e);else{((e,t,r)=>{let n=r.retries-(t-1);return e.attemptNumber=t,e.retriesLeft=n})(e,n,t);try{await t.onFailedAttempt(e)}catch(e){s(e);return}a.retry(e)||s(a.mainError())}}}})});e.exports=s,e.exports.default=s,e.exports.AbortError=i},69344:e=>{"use strict";e.exports=TypeError},69764:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,r,o){if(!r||0===o.length)return r;if(o.length<2)throw Error(`Invalid path provided: [${o.join(", ")}]`);return e(t,(0,n.getInlineFragment)(t,r[o[0]]).selection[o[1]].fieldQuery,o.slice(2))};let n=r(26222)},70620:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=0){let r=0xdeadbeef^t,n=0x41c6ce57^t;for(let t=0,o;t<e.length;t+=1)r=Math.imul(r^(o=e.charCodeAt(t)),0x9e3779b1),n=Math.imul(n^o,0x5f356495);return r=Math.imul(r^r>>>16,0x85ebca6b)^Math.imul(n^n>>>13,0xc2b2ae35),0x100000000*(2097151&(n=Math.imul(n^n>>>16,0x85ebca6b)^Math.imul(r^r>>>13,0xc2b2ae35)))+(r>>>0)}},71078:e=>{"use strict";e.exports=URIError},71210:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return i.isReactNative?(0,o.nanoid)():(0,n.nanoid)()};let n=r(95740),o=r(67303),i=r(3257)},71572:function(e,t,r){"use strict";var n,o=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return(n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&o(t,e,r[s]);return i(t,e),t}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let l=r(26222),u=a(r(34341)),c=a(r(34880)),p=a(r(57604)),f=a(r(18189)),d=a(r(99297)),h=s(r(61111));class g{constructor(e){this.typeName=this.constructor.name,this.props=e}updateIfNeeded(){let{context:e,parent:t,step:r}=this.props;if(e&&e.initData&&this.props.initDataHash!==e.initData.hash){if(!t){this.props=Object.assign(Object.assign({},this.props),{initDataHash:e.initData.hash,expression:e.initData.reducedExpression});return}if(!r)throw Error("Node update error: Missing step.");switch(r.type){case"GetFieldStep":this.props=t.getFieldNodeProps(r.fieldName,{fieldArguments:r.fieldArguments});break;case"GetItemStep":{let e=t.getItemNodeProps({fallbackLength:r.fallbackLength})[r.index];if(!e)throw Error("Node update error: No item props.");this.props=e;break}default:throw Error(`Unexpected step: ${JSON.stringify(r)}`)}}}getFieldNode(e,{fieldArguments:t={}}={}){return new g(this.getFieldNodeProps(e,{fieldArguments:t}))}getField(e,t){return this.getFieldNodeProps(e,{fieldArguments:t})}getFieldNodeProps(e,{fieldArguments:t={}}={}){var r;let n={type:"GetFieldStep",fieldName:e,fieldArguments:t},{context:o}=this.props,i=null==(r=null==o?void 0:o.initData)?void 0:r.hash;if(!i||!o.getFieldCache)return this.createProps(n,this.getReducedFieldExpression(e,t));let s=(0,d.default)(i,(0,h.default)(this,n),""),a=o.getFieldCache.get(s);if(a)return this.createProps(n,a);let l=this.getReducedFieldExpression(e,t);return l&&o.getFieldCache.set(s,l),this.createProps(n,l)}getReducedFieldExpression(e,t){try{(0,l.prefixError)(()=>(0,p.default)(t),"Invalid field arguments: "),this.updateIfNeeded();let{expression:r}=this.props;if(!r)return this.log(l.LogLevel.Debug,`Using fallback for field "${e}" as expression is null. This is expected before initialization.`),null;if("ObjectExpression"!==r.type)throw Error(`Cannot get field "${e}" as expression type is "${r.type}".`);let n=(0,l.nullThrows)(this.props.context,`Cannot get field "${e}" as context is null.`),{objectTypeName:o}=r,i=n.reduce({[o]:{type:"InlineFragment",objectTypeName:o,selection:{[e]:{fieldArguments:t,fieldQuery:null}}}},r);if("ObjectExpression"!==i.type)throw Error(`Cannot get field "${e}" as reduced expression type is "${r.type}".`);let s=(0,l.nullThrows)(i.fields[e],`Object expression does not contain field "${e}".`);return s.logs=(0,l.mergeLogs)(i.logs,(0,l.getExpressionEvaluationCountLogs)(i),s.logs),s}catch(r){return this.log(l.LogLevel.Error,`Error getting field "${e}" with arguments ${JSON.stringify(t)}: ${(0,l.asError)(r).message}`,(0,u.default)(r)),null}}getItemNodes({fallbackLength:e=0}={}){return this.getItemNodeProps({fallbackLength:e}).map(e=>new g(e))}_getItems(e){return this.getItemNodeProps({fallbackLength:e})}getItemNodeProps({fallbackLength:e=0}={}){var t;let{context:r,parent:n,step:o}=this.props,i=null==(t=null==r?void 0:r.initData)?void 0:t.hash;if(!i||!r.getItemsCache)return this.createPropsArray(this._getItemExpressions(),e);let s=(0,d.default)(i,(0,h.default)(n,o),""),a=r.getItemsCache.get(s);if(a)return this.createPropsArray(a,e);let l=this._getItemExpressions();return l&&r.getItemsCache.set(s,l),this.createPropsArray(l,e)}_getItemExpressions(){try{this.updateIfNeeded();let{expression:e}=this.props;if(!e)return this.log(l.LogLevel.Debug,"Using fallback for array items as expression is null. This is expected before initialization."),null;if("ListExpression"!==e.type)throw Error(`Cannot get items as expression type is "${e.type}". ${l.breakingSchemaChangesError}`);let t=(0,l.mergeLogs)(e.logs,(0,l.getExpressionEvaluationCountLogs)(e));return e.items.map((e,r)=>{let n=(0,l.nullThrows)(e,`List expression has null item at index ${r}.`);return n.logs=(0,l.mergeLogs)(t,n.logs),n})}catch(e){return this.log(l.LogLevel.Error,`Error getting items: ${(0,l.asError)(e).message}`,(0,u.default)(e)),null}}getFieldValue(e,{fallback:t,query:r=null,fieldArguments:n={}}){return this.getFieldNode(e,{fieldArguments:n}).getValue({fallback:t,query:r})}evaluate(e,t){return this.getValue({query:e,fallback:t})}getValue({query:e=null,fallback:t}){var r;let{value:n,logs:o,path:i,args:s,shouldLogEvaluation:a}=this.getValueAndLogsWithCache(e),l=null===n,u=(0,c.default)(l?t:n,this.getNodeOverride());return this.logReductionLogs(Object.assign(Object.assign({},o),{evaluationList:a?[...null!=(r=o.evaluationList)?r:[],{path:i,value:u,args:s,isFallback:l}]:o.evaluationList})),u}getNodeOverride(){var e,t,r;let{context:n,parent:o,step:i}=this.props;if(!n||null===n.override||void 0===n.override)return;if(!o)return null!=(e=n.override)?e:void 0;if(!i)return;let s=o.getNodeOverride();if(null!=s)return"GetFieldStep"===i.type?null!=(t=s[i.fieldName])?t:void 0:null!=(r=s[i.index])?r:void 0}getValueAndLogsWithCache(e){var t;let{context:r,parent:n,step:o}=this.props,i=null==(t=null==r?void 0:r.initData)?void 0:t.hash;if(!i||!r.evaluateCache)return this.getValueAndLogs(e);let s=(0,d.default)(i,(0,h.default)(n,o),JSON.stringify(e)),a=r.evaluateCache.get(s);if(a)return a;let l=this.getValueAndLogs(e);return null!==l.value&&r.evaluateCache.set(s,l),l}getValueAndLogs(e){let{path:t,args:r}=(0,h.getJsonNodePathAndArgs)(this.props.parent,this.props.step);try{this.updateIfNeeded();let{expression:n}=this.props;if(!n)return{path:t,args:r,value:null,logs:{messageList:[{level:l.LogLevel.Debug,message:"Using fallback while evaluating as expression is null. This is expected before initialization.",metadata:{}}]},shouldLogEvaluation:!0};let o=(0,l.nullThrows)(this.props.context,"Cannot evaluate as context is null.").reduce(e,n),{value:i,logs:s,shouldLogEvaluation:a}=(0,l.prefixError)(()=>(0,l.evaluate)(o),"Evaluation error: ");return{value:i,logs:s,path:t,args:r,shouldLogEvaluation:a}}catch(e){return{path:t,args:r,value:null,logs:{messageList:[{level:l.LogLevel.Error,message:`Error getting value and logs: ${(0,l.asError)(e).message}`,metadata:(0,u.default)(e)}]},shouldLogEvaluation:!0}}}createProps(e,t){let{context:r,logger:n,initDataHash:o}=this.props;return{step:e,parent:this,context:r,expression:t,logger:n,initDataHash:o}}createPropsArray(e,t){return(e||Array(t).fill(null)).map((e,r)=>this.createProps({type:"GetItemStep",index:r,fallbackLength:t},e))}_logUnexpectedTypeError(){if(!this.props.expression)return void this.log(l.LogLevel.Debug,"Unexpected expression type as expression is null but this is expected before initialization.");this.log(l.LogLevel.Error,"Unexpected expression type.")}logUnexpectedValueError(e){this.log(l.LogLevel.Error,`Evaluated to unexpected value: ${JSON.stringify(e)}`)}log(e,t,r={}){this.logReductionLogs({messageList:[{level:e,message:t,metadata:r}]})}logReductionLogs(e){var t,r,n;let{typeName:o}=this,{parent:i,step:s,logger:a,expression:l,initDataHash:u}=this.props,c=null!=(n=null==(r=null==(t=this.props.context)?void 0:t.initData)?void 0:r.commitId.toString())?n:null,p=(0,h.default)(i,s);if(!a)return void console.error(...(0,f.default)(`No logger for ${o}Node at ${p} to log reduction logs`,{reductionLogs:e}));a.nodeLog({commitId:c,initDataHash:u,nodeTypeName:o,nodePath:p,nodeExpression:l,reductionLogs:e})}getStateHash(){let{context:e}=this.props;return e?e.getStateHash():(this.log(l.LogLevel.Error,"No context so cannot get state hash."),null)}getInitResponse(){let{context:e}=this.props;return e&&e.initData?e.initData:(this.log(l.LogLevel.Error,"No context so cannot get init data."),null)}getHashResponse(){let{context:e}=this.props;return e&&e.initData?(0,l.formatHashData)(e.initData):(this.log(l.LogLevel.Error,"No context so cannot get hash data."),null)}addUpdateListener(e){let{context:t}=this.props;if(!t)return void this.log(l.LogLevel.Error,"No context so cannot add update listener.");t.addUpdateListener(e)}removeUpdateListener(e){let{context:t}=this.props;if(!t)return void this.log(l.LogLevel.Error,"No context so cannot remove update listener.");t.removeUpdateListener(e)}initIfNeeded(e=(0,l.uniqueId)(),t=0){let{context:r}=this.props;return r?r.initIfNeeded(e,t):(this.log(l.LogLevel.Error,"No context so cannot initialize from the data provider."),Promise.resolve())}getLastInitDataRefreshTime(){let{context:e}=this.props;return e?e.lastInitDataRefreshTime:(this.log(l.LogLevel.Error,"No context so cannot get the last data provider init time."),null)}getLastDataProviderInitTime(){return this.getLastInitDataRefreshTime()}isReady(){let{context:e}=this.props;return!!e&&e.isReady()}flushLogs(e=(0,l.uniqueId)()){let{context:t}=this.props;return t?t.logger.flush(e):(this.log(l.LogLevel.Error,"No context so cannot flush logs."),Promise.resolve())}setOverride(e,t=(0,l.uniqueId)()){let{context:r}=this.props;if(!r)return void this.log(l.LogLevel.Error,"No context so cannot set override.");r.setOverride(t,e)}dehydrate(e,t){let{context:r}=this.props;return r?r.dehydrate(e,t):(this.log(l.LogLevel.Error,"No context so cannot dehydrate."),null)}hydrate(e,t=(0,l.uniqueId)()){let{context:r}=this.props;if(!r)return void this.log(l.LogLevel.Error,"No context so cannot hydrate.");r.hydrate(t,e)}close(e=(0,l.uniqueId)()){let{context:t}=this.props;return t?t.close(e):(this.log(l.LogLevel.Error,"No context so cannot close."),Promise.resolve())}getFlagValues({flagFallbacks:e,flagPaths:t}){return t.reduce((t,r)=>(t[r]=this.getFlagValue(r,e[r]),t),{})}getFlagValue(e,t){return e.split(".").reduce((e,t)=>e.getFieldNode(t,{}),this).getValue({fallback:t})}getEncodedFlagValues({flagFallbacks:e,flagPaths:t}){return btoa(JSON.stringify(this.getFlagValues({flagFallbacks:e,flagPaths:t})))}}t.default=g},72019:e=>{"use strict";e.exports=Function.prototype.apply},72783:(e,t,r)=>{"use strict";var n;if(!Object.keys){var o=Object.prototype.hasOwnProperty,i=Object.prototype.toString,s=r(78355),a=Object.prototype.propertyIsEnumerable,l=!a.call({toString:null},"toString"),u=a.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=function(e){var t=e.constructor;return t&&t.prototype===e},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!f["$"+e]&&o.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{p(window[e])}catch(e){return!0}}catch(e){return!0}return!1}(),h=function(e){if("undefined"==typeof window||!d)return p(e);try{return p(e)}catch(e){return!1}};n=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===i.call(e),n=s(e),a=t&&"[object String]"===i.call(e),p=[];if(!t&&!r&&!n)throw TypeError("Object.keys called on a non-object");var f=u&&r;if(a&&e.length>0&&!o.call(e,0))for(var d=0;d<e.length;++d)p.push(String(d));if(n&&e.length>0)for(var g=0;g<e.length;++g)p.push(String(g));else for(var y in e)!(f&&"prototype"===y)&&o.call(e,y)&&p.push(String(y));if(l)for(var m=h(e),b=0;b<c.length;++b)!(m&&"constructor"===c[b])&&o.call(e,c[b])&&p.push(c[b]);return p}}e.exports=n},75997:e=>{"use strict";e.exports=Object},76520:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(null==e)throw t instanceof Error?t:Error(t);return e}},76813:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return"InlineFragment"===t.type?t:(0,o.default)(e[t.fragmentName],`Missing fragment definition for fragment with name: "${t.fragmentName}".`)};let o=n(r(76520))},78355:e=>{"use strict";var t=Object.prototype.toString;e.exports=function(e){var r=t.call(e),n="[object Arguments]"===r;return n||(n="[object Array]"!==r&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),n}},78358:e=>{"use strict";e.exports=EvalError},80182:(e,t,r)=>{"use strict";var n=Function.prototype.call,o=Object.prototype.hasOwnProperty;e.exports=r(67348).call(n,o)},81598:e=>{"use strict";e.exports=Math.max},84458:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getAnonymousExpression=i,t.getNoOpExpression=function(e){return{id:(0,o.default)(),isTransient:e,type:"NoOpExpression",valueType:{type:"VoidValueType"}}},t.getBooleanIfExpression=function(e,t){return{id:(0,o.default)(),isTransient:t,type:"SwitchExpression",valueType:{type:"BooleanValueType"},control:s(!0),cases:[],default:s(e,t)}},t.getBooleanExpression=s,t.getIntExpression=a,t.getFloatExpression=l,t.getStringExpression=u,t.getAnonymousListExpression=c,t.getAnonymousObjectExpression=p;let o=n(r(71210));function i(e,t){if("boolean"==typeof e)return s(e,t);if("number"==typeof e)return Number.isInteger(e)?a(e,t):l(e,t);if("string"==typeof e)return u(e,t);if(Array.isArray(e))return c(e,t);if("object"==typeof e)return p(e,t);throw Error(`Unexpected value: ${e}`)}function s(e,t){return{id:(0,o.default)(),isTransient:t,type:"BooleanExpression",valueType:{type:"BooleanValueType"},value:e}}function a(e,t){return{id:(0,o.default)(),isTransient:t,type:"IntExpression",valueType:{type:"IntValueType"},value:Math.round(e)}}function l(e,t){return{id:(0,o.default)(),isTransient:t,type:"FloatExpression",valueType:{type:"FloatValueType"},value:e}}function u(e,t){return{id:(0,o.default)(),isTransient:t,type:"StringExpression",valueType:{type:"StringValueType"},value:e}}function c(e,t){return{id:(0,o.default)(),isTransient:t,type:"ListExpression",valueType:{type:"ListValueType",itemValueType:{type:"VoidValueType"}},items:e.map(e=>i(e,t))}}function p(e,t){return{id:(0,o.default)(),isTransient:t,type:"ObjectExpression",valueType:{type:"ObjectValueType",objectTypeName:""},objectTypeName:"",fields:Object.fromEntries(Object.entries(e).map(([e,r])=>[e,i(r,t)]))}}},84506:(e,t,r)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,o=r(3928);e.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&o()}},88938:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let i=o(r(55498));class s{constructor({edgeConfigClient:e,itemKey:t}){this.edgeConfigClient=e,this.itemKey=t}getName(){return"Vercel Edge Config"}getInitData(){return n(this,void 0,void 0,function*(){let e=yield this.edgeConfigClient.get(this.itemKey);if(!e)throw Error(`[initFromEdgeConfig] no value for key ${this.itemKey}`);let t="string"==typeof e?(0,i.default)(e):e;if(!t.commitId)throw Error(`[initFromEdgeConfig] unexpected response: ${JSON.stringify(t)}`);return t})}}t.default=s},89030:e=>{"use strict";e.exports="undefined"!=typeof Reflect&&Reflect&&Reflect.apply},90215:(e,t,r)=>{"use strict";var n=r(96452),o=r(45614),i=r(41483)(),s=r(24915),a=r(69344),l=n("%Math.floor%");e.exports=function(e,t){if("function"!=typeof e)throw new a("`fn` is not a function");if("number"!=typeof t||t<0||t>0xffffffff||l(t)!==t)throw new a("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],n=!0,u=!0;if("length"in e&&s){var c=s(e,"length");c&&!c.configurable&&(n=!1),c&&!c.writable&&(u=!1)}return(n||u||!r)&&(i?o(e,"length",t,!0,!0):o(e,"length",t)),e}},90706:e=>{"use strict";var t,r,n,o=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function s(e){return o.lastIndex=0,o.test(e)?'"'+e.replace(o,function(e){var t=i[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}e.exports=function(e,o,i){var a;if(t="",r="","number"==typeof i)for(a=0;a<i;a+=1)r+=" ";else"string"==typeof i&&(r=i);if(n=o,o&&"function"!=typeof o&&("object"!=typeof o||"number"!=typeof o.length))throw Error("JSON.stringify");return function e(o,i){var a,l,u,c,p,f=t,d=i[o];switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(o)),"function"==typeof n&&(d=n.call(i,o,d)),typeof d){case"string":return s(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(t+=r,p=[],"[object Array]"===Object.prototype.toString.apply(d)){for(a=0,c=d.length;a<c;a+=1)p[a]=e(a,d)||"null";return u=0===p.length?"[]":t?"[\n"+t+p.join(",\n"+t)+"\n"+f+"]":"["+p.join(",")+"]",t=f,u}if(n&&"object"==typeof n)for(a=0,c=n.length;a<c;a+=1)"string"==typeof(l=n[a])&&(u=e(l,d))&&p.push(s(l)+(t?": ":":")+u);else for(l in d)Object.prototype.hasOwnProperty.call(d,l)&&(u=e(l,d))&&p.push(s(l)+(t?": ":":")+u);return u=0===p.length?"{}":t?"{\n"+t+p.join(",\n"+t)+"\n"+f+"}":"{"+p.join(",")+"}",t=f,u}}("",{"":e})}},91950:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){switch(e){case"discrete":return n.DimensionType.Discrete;case"continuous":return n.DimensionType.Continuous;default:throw Error(`Unknown dimension type ${e}`)}};let n=r(28815)},93723:(e,t,r)=>{var n=r(11757);t.operation=function(e){return new n(t.timeouts(e),{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw Error("minTimeout is greater than maxTimeout");for(var n=[],o=0;o<t.retries;o++)n.push(this.createTimeout(o,t));return e&&e.forever&&!n.length&&n.push(this.createTimeout(o,t)),n.sort(function(e,t){return e-t}),n},t.createTimeout=function(e,t){var r=Math.round((t.randomize?Math.random()+1:1)*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return Math.min(r,t.maxTimeout)},t.wrap=function(e,r,n){if(r instanceof Array&&(n=r,r=null),!n)for(var o in n=[],e)"function"==typeof e[o]&&n.push(o);for(var i=0;i<n.length;i++){var s=n[i],a=e[s];e[s]=(function(n){var o=t.operation(r),i=Array.prototype.slice.call(arguments,1),s=i.pop();i.push(function(e){o.retry(e)||(e&&(arguments[0]=o.mainError()),s.apply(this,arguments))}),o.attempt(function(){n.apply(e,i)})}).bind(e,a),e[s].options=r}}},94119:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.complexFormExpressionEvaluationError=void 0,t.default=function e(r){let n=(0,s.mergeLogs)(r.logs,(0,s.getExpressionEvaluationCountLogs)(r));switch(r.type){case"NoOpExpression":return{value:!0,logs:n,shouldLogEvaluation:!1};case"BooleanExpression":case"IntExpression":case"FloatExpression":case"StringExpression":case"RegexExpression":case"EnumExpression":return{value:r.value,logs:n,shouldLogEvaluation:!0};case"ObjectExpression":{let t=Object.fromEntries(Object.keys(r.fields).map(t=>[t,e((0,i.default)(r.fields[t],"null object field"))]));return{value:Object.fromEntries([[o.graphqlTypeNameKey,r.objectTypeName],...Object.entries(t).map(([e,t])=>[e,t.value])]),logs:(0,s.mergeLogs)(n,...Object.values(t).map(e=>e.logs)),shouldLogEvaluation:!0}}case"ListExpression":{let t=r.items.map(t=>e((0,i.default)(t,"null list item")));return{value:t.map(e=>e.value),logs:(0,s.mergeLogs)(n,...t.map(e=>e.logs)),shouldLogEvaluation:!0}}case"GetFieldExpression":case"UpdateObjectExpression":case"SwitchExpression":case"EnumSwitchExpression":case"ComparisonExpression":case"ArithmeticExpression":case"RoundNumberExpression":case"StringifyNumberExpression":case"StringConcatExpression":case"GetUrlQueryParameterExpression":case"SplitExpression":case"LogEventExpression":case"FunctionExpression":case"VariableExpression":case"ApplicationExpression":throw Error(t.complexFormExpressionEvaluationError);default:throw Error(`unexpected expression: ${JSON.stringify(r)}`)}};let o=r(58099),i=n(r(76520)),s=r(11430);t.complexFormExpressionEvaluationError=`After evaluating your expression, the result was still in a complex form. ${o.breakingSchemaChangesError}`},95740:(e,t,r)=>{"use strict";r.r(t),r.d(t,{customAlphabet:()=>s,customRandom:()=>i,nanoid:()=>a,random:()=>o,urlAlphabet:()=>n});let n="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",o=e=>crypto.getRandomValues(new Uint8Array(e)),i=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,o=-~(1.6*n*t/e.length);return (i=t)=>{let s="";for(;;){let t=r(o),a=0|o;for(;a--;)if((s+=e[t[a]&n]||"").length===i)return s}}},s=(e,t=21)=>i(e,t,o),a=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,t)=>((t&=63)<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"")},96452:(e,t,r)=>{"use strict";var n,o=r(75997),i=r(96748),s=r(78358),a=r(47369),l=r(53733),u=r(27131),c=r(69344),p=r(71078),f=r(29884),d=r(19950),h=r(81598),g=r(99516),y=r(43126),m=r(512),b=r(11313),v=Function,E=function(e){try{return v('"use strict"; return ('+e+").constructor;")()}catch(e){}},x=r(24915),O=r(64854),j=function(){throw new c},w=x?function(){try{return arguments.callee,j}catch(e){try{return x(arguments,"callee").get}catch(e){return j}}}():j,_=r(84506)(),L=r(34548),P=r(27444),S=r(25366),A=r(72019),N=r(20677),T={},I="undefined"!=typeof Uint8Array&&L?L(Uint8Array):n,D={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":_&&L?L([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":T,"%AsyncGenerator%":T,"%AsyncGeneratorFunction%":T,"%AsyncIteratorPrototype%":T,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":i,"%eval%":eval,"%EvalError%":s,"%Float16Array%":"undefined"==typeof Float16Array?n:Float16Array,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":v,"%GeneratorFunction%":T,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":_&&L?L(L([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&_&&L?L(new Map()[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":o,"%Object.getOwnPropertyDescriptor%":x,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":a,"%ReferenceError%":l,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&_&&L?L(new Set()[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":_&&L?L(""[Symbol.iterator]()):n,"%Symbol%":_?Symbol:n,"%SyntaxError%":u,"%ThrowTypeError%":w,"%TypedArray%":I,"%TypeError%":c,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":p,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet,"%Function.prototype.call%":N,"%Function.prototype.apply%":A,"%Object.defineProperty%":O,"%Object.getPrototypeOf%":P,"%Math.abs%":f,"%Math.floor%":d,"%Math.max%":h,"%Math.min%":g,"%Math.pow%":y,"%Math.round%":m,"%Math.sign%":b,"%Reflect.getPrototypeOf%":S};if(L)try{null.error}catch(e){var R=L(L(e));D["%Error.prototype%"]=R}var M=function e(t){var r;if("%AsyncFunction%"===t)r=E("async function () {}");else if("%GeneratorFunction%"===t)r=E("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=E("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&L&&(r=L(o.prototype))}return D[t]=r,r},F={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},$=r(67348),C=r(80182),U=$.call(N,Array.prototype.concat),k=$.call(A,Array.prototype.splice),B=$.call(N,String.prototype.replace),V=$.call(N,String.prototype.slice),q=$.call(N,RegExp.prototype.exec),G=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,H=/\\(\\)?/g,J=function(e){var t=V(e,0,1),r=V(e,-1);if("%"===t&&"%"!==r)throw new u("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new u("invalid intrinsic syntax, expected opening `%`");var n=[];return B(e,G,function(e,t,r,o){n[n.length]=r?B(o,H,"$1"):t||e}),n},W=function(e,t){var r,n=e;if(C(F,n)&&(n="%"+(r=F[n])[0]+"%"),C(D,n)){var o=D[n];if(o===T&&(o=M(n)),void 0===o&&!t)throw new c("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new u("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new c('"allowMissing" argument must be a boolean');if(null===q(/^%?[^%]*%?$/,e))throw new u("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=J(e),n=r.length>0?r[0]:"",o=W("%"+n+"%",t),i=o.name,s=o.value,a=!1,l=o.alias;l&&(n=l[0],k(r,U([0,1],l)));for(var p=1,f=!0;p<r.length;p+=1){var d=r[p],h=V(d,0,1),g=V(d,-1);if(('"'===h||"'"===h||"`"===h||'"'===g||"'"===g||"`"===g)&&h!==g)throw new u("property names with quotes must have matching quotes");if("constructor"!==d&&f||(a=!0),n+="."+d,C(D,i="%"+n+"%"))s=D[i];else if(null!=s){if(!(d in s)){if(!t)throw new c("base intrinsic for "+e+" exists, but the property is not available.");return}if(x&&p+1>=r.length){var y=x(s,d);s=(f=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:s[d]}else f=C(s,d),s=s[d];f&&!a&&(D[i]=s)}}return s}},96748:e=>{"use strict";e.exports=Error},99297:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){return(0,n.hash)(`${e}/${t}/${r}`).toString()};let n=r(26222)},99516:e=>{"use strict";e.exports=Math.min}}]);